{"ast":null,"code":"var _jsxFileName = \"D:\\\\Developer\\\\Personal\\\\Games\\\\Multiplayer-Blackjack\\\\client\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase } from '../config/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [session, setSession] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [balance, setBalance] = useState(1000);\n  const [username, setUsername] = useState('');\n\n  // Generate guest username\n  const generateGuestUsername = () => {\n    const randomNum = Math.floor(Math.random() * 10000);\n    return `guest${randomNum}`;\n  };\n\n  // Initialize auth state\n  useEffect(() => {\n    // Check for existing session\n    supabase.auth.getSession().then(({\n      data: {\n        session\n      }\n    }) => {\n      var _session$user;\n      setSession(session);\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n      if (session !== null && session !== void 0 && session.user) {\n        loadUserBalance(session.user.id);\n        loadUsername(session.user.id);\n      } else {\n        // Don't auto-create guest - wait for user to choose\n        // Only set guest if they've explicitly chosen guest mode (stored in sessionStorage)\n        const guestMode = sessionStorage.getItem('guestMode');\n        if (guestMode === 'true') {\n          const guestUsername = generateGuestUsername();\n          setUsername(guestUsername);\n          setBalance(1000);\n        }\n        // Otherwise, username stays empty to show auth screen\n      }\n      setLoading(false);\n    });\n\n    // Listen for auth changes\n    const {\n      data: {\n        subscription\n      }\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      var _session$user2;\n      setSession(session);\n      setUser((_session$user2 = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user2 !== void 0 ? _session$user2 : null);\n      if (session !== null && session !== void 0 && session.user) {\n        loadUserBalance(session.user.id);\n        loadUsername(session.user.id);\n        // Clear guest mode if user signs in\n        sessionStorage.removeItem('guestMode');\n      } else {\n        // Check if guest mode was previously set\n        const guestMode = sessionStorage.getItem('guestMode');\n        if (guestMode === 'true') {\n          const guestUsername = generateGuestUsername();\n          setUsername(guestUsername);\n          setBalance(1000);\n        } else {\n          // User signed out - clear username to show auth screen again\n          setUsername('');\n          setBalance(1000);\n        }\n      }\n    });\n    return () => subscription.unsubscribe();\n  }, []);\n\n  // Load user balance from Supabase\n  const loadUserBalance = async userId => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('user_balances').select('balance').eq('user_id', userId).single();\n      if (error && error.code !== 'PGRST116') {\n        console.error('Error loading balance:', error);\n        setBalance(1000); // Default balance\n        return;\n      }\n      if (data) {\n        // If balance is 0 or less, reset to 1000\n        setBalance(data.balance > 0 ? data.balance : 1000);\n      } else {\n        // No record exists, create one with default balance\n        await createUserBalance(userId, 1000);\n        setBalance(1000);\n      }\n    } catch (error) {\n      console.error('Error loading balance:', error);\n      setBalance(1000);\n    }\n  };\n\n  // Load username from Supabase\n  const loadUsername = async userId => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('user_profiles').select('username').eq('user_id', userId).single();\n      if (error && error.code !== 'PGRST116') {\n        console.error('Error loading username:', error);\n        return;\n      }\n      if (data) {\n        setUsername(data.username);\n      }\n    } catch (error) {\n      console.error('Error loading username:', error);\n    }\n  };\n\n  // Create user balance record\n  const createUserBalance = async (userId, initialBalance = 1000) => {\n    try {\n      const {\n        error\n      } = await supabase.from('user_balances').insert({\n        user_id: userId,\n        balance: initialBalance,\n        updated_at: new Date().toISOString()\n      });\n      if (error) {\n        console.error('Error creating balance:', error);\n      }\n    } catch (error) {\n      console.error('Error creating balance:', error);\n    }\n  };\n\n  // Update user balance in Supabase\n  const updateBalance = async newBalance => {\n    // Always update local state first for immediate UI feedback\n    setBalance(newBalance);\n    if (!user) {\n      // Guest mode - just update local state, don't save\n      return;\n    }\n    try {\n      // If balance is 0 or less, reset to 1000\n      const balanceToSave = newBalance > 0 ? newBalance : 1000;\n      const {\n        error\n      } = await supabase.from('user_balances').upsert({\n        user_id: user.id,\n        balance: balanceToSave,\n        updated_at: new Date().toISOString()\n      }, {\n        onConflict: 'user_id'\n      });\n      if (error) {\n        console.error('Error updating balance:', error);\n        // If update fails, keep the local balance but log the error\n      } else if (balanceToSave !== newBalance) {\n        // If balance was reset, update local state to reflect the reset\n        setBalance(balanceToSave);\n      }\n    } catch (error) {\n      console.error('Error updating balance:', error);\n    }\n  };\n\n  // Sign up\n  const signUp = async (email, password, username) => {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          data: {\n            username: username\n          },\n          emailRedirectTo: window.location.origin\n        }\n      });\n      if (error) throw error;\n\n      // Create user profile\n      if (data.user) {\n        await supabase.from('user_profiles').insert({\n          user_id: data.user.id,\n          username: username,\n          email: email,\n          // Store email for username login lookup\n          created_at: new Date().toISOString()\n        });\n\n        // Create balance record\n        await createUserBalance(data.user.id, 1000);\n\n        // If session exists (email confirmation disabled), set username immediately\n        if (data.session) {\n          setUsername(username);\n          await loadUserBalance(data.user.id);\n        } else {\n          // Email confirmation required - show message\n          return {\n            data,\n            error: null,\n            requiresConfirmation: true\n          };\n        }\n      }\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      return {\n        data: null,\n        error\n      };\n    }\n  };\n\n  // Sign in - accepts either email or username\n  const signIn = async (emailOrUsername, password) => {\n    try {\n      let emailToUse = emailOrUsername;\n\n      // Check if input is a username (doesn't contain @)\n      if (!emailOrUsername.includes('@')) {\n        // Look up email by username from user_profiles\n        const {\n          data: profileData,\n          error: profileError\n        } = await supabase.from('user_profiles').select('email').eq('username', emailOrUsername).single();\n        if (profileError || !profileData || !profileData.email) {\n          return {\n            data: null,\n            error: {\n              message: 'Invalid username or password'\n            }\n          };\n        }\n        emailToUse = profileData.email;\n      }\n      const {\n        data,\n        error\n      } = await supabase.auth.signInWithPassword({\n        email: emailToUse,\n        password\n      });\n      if (error) throw error;\n      if (data.user) {\n        await loadUserBalance(data.user.id);\n        await loadUsername(data.user.id);\n      }\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      return {\n        data: null,\n        error\n      };\n    }\n  };\n\n  // Sign out\n  const signOut = async () => {\n    try {\n      const {\n        error\n      } = await supabase.auth.signOut();\n      if (error) throw error;\n\n      // Clear guest mode and reset\n      sessionStorage.removeItem('guestMode');\n      setUsername('');\n      setBalance(1000);\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  // Continue as guest\n  const continueAsGuest = () => {\n    const guestUsername = generateGuestUsername();\n    setUsername(guestUsername);\n    setBalance(1000);\n    // Store guest mode in sessionStorage so it persists on refresh\n    sessionStorage.setItem('guestMode', 'true');\n  };\n  const value = {\n    user,\n    session,\n    loading,\n    balance,\n    username,\n    setBalance: updateBalance,\n    signUp,\n    signIn,\n    signOut,\n    continueAsGuest,\n    isGuest: !user\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 309,\n    columnNumber: 10\n  }, this);\n};\n_s2(AuthProvider, \"wagTIdY9ehJetK+eGepWkg7MszI=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","supabase","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","session","setSession","loading","setLoading","balance","setBalance","username","setUsername","generateGuestUsername","randomNum","Math","floor","random","auth","getSession","then","data","_session$user","loadUserBalance","id","loadUsername","guestMode","sessionStorage","getItem","guestUsername","subscription","onAuthStateChange","_event","_session$user2","removeItem","unsubscribe","userId","error","from","select","eq","single","code","console","createUserBalance","initialBalance","insert","user_id","updated_at","Date","toISOString","updateBalance","newBalance","balanceToSave","upsert","onConflict","signUp","email","password","options","emailRedirectTo","window","location","origin","created_at","requiresConfirmation","signIn","emailOrUsername","emailToUse","includes","profileData","profileError","message","signInWithPassword","signOut","continueAsGuest","setItem","value","isGuest","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Developer/Personal/Games/Multiplayer-Blackjack/client/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { supabase } from '../config/supabase';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [session, setSession] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [balance, setBalance] = useState(1000);\r\n  const [username, setUsername] = useState('');\r\n\r\n  // Generate guest username\r\n  const generateGuestUsername = () => {\r\n    const randomNum = Math.floor(Math.random() * 10000);\r\n    return `guest${randomNum}`;\r\n  };\r\n\r\n  // Initialize auth state\r\n  useEffect(() => {\r\n    // Check for existing session\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      if (session?.user) {\r\n        loadUserBalance(session.user.id);\r\n        loadUsername(session.user.id);\r\n      } else {\r\n        // Don't auto-create guest - wait for user to choose\r\n        // Only set guest if they've explicitly chosen guest mode (stored in sessionStorage)\r\n        const guestMode = sessionStorage.getItem('guestMode');\r\n        if (guestMode === 'true') {\r\n          const guestUsername = generateGuestUsername();\r\n          setUsername(guestUsername);\r\n          setBalance(1000);\r\n        }\r\n        // Otherwise, username stays empty to show auth screen\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    // Listen for auth changes\r\n    const {\r\n      data: { subscription },\r\n    } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setSession(session);\r\n      setUser(session?.user ?? null);\r\n      if (session?.user) {\r\n        loadUserBalance(session.user.id);\r\n        loadUsername(session.user.id);\r\n        // Clear guest mode if user signs in\r\n        sessionStorage.removeItem('guestMode');\r\n      } else {\r\n        // Check if guest mode was previously set\r\n        const guestMode = sessionStorage.getItem('guestMode');\r\n        if (guestMode === 'true') {\r\n          const guestUsername = generateGuestUsername();\r\n          setUsername(guestUsername);\r\n          setBalance(1000);\r\n        } else {\r\n          // User signed out - clear username to show auth screen again\r\n          setUsername('');\r\n          setBalance(1000);\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  // Load user balance from Supabase\r\n  const loadUserBalance = async (userId) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('user_balances')\r\n        .select('balance')\r\n        .eq('user_id', userId)\r\n        .single();\r\n\r\n      if (error && error.code !== 'PGRST116') {\r\n        console.error('Error loading balance:', error);\r\n        setBalance(1000); // Default balance\r\n        return;\r\n      }\r\n\r\n      if (data) {\r\n        // If balance is 0 or less, reset to 1000\r\n        setBalance(data.balance > 0 ? data.balance : 1000);\r\n      } else {\r\n        // No record exists, create one with default balance\r\n        await createUserBalance(userId, 1000);\r\n        setBalance(1000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading balance:', error);\r\n      setBalance(1000);\r\n    }\r\n  };\r\n\r\n  // Load username from Supabase\r\n  const loadUsername = async (userId) => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('user_profiles')\r\n        .select('username')\r\n        .eq('user_id', userId)\r\n        .single();\r\n\r\n      if (error && error.code !== 'PGRST116') {\r\n        console.error('Error loading username:', error);\r\n        return;\r\n      }\r\n\r\n      if (data) {\r\n        setUsername(data.username);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading username:', error);\r\n    }\r\n  };\r\n\r\n  // Create user balance record\r\n  const createUserBalance = async (userId, initialBalance = 1000) => {\r\n    try {\r\n      const { error } = await supabase\r\n        .from('user_balances')\r\n        .insert({\r\n          user_id: userId,\r\n          balance: initialBalance,\r\n          updated_at: new Date().toISOString()\r\n        });\r\n\r\n      if (error) {\r\n        console.error('Error creating balance:', error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error creating balance:', error);\r\n    }\r\n  };\r\n\r\n  // Update user balance in Supabase\r\n  const updateBalance = async (newBalance) => {\r\n    // Always update local state first for immediate UI feedback\r\n    setBalance(newBalance);\r\n    \r\n    if (!user) {\r\n      // Guest mode - just update local state, don't save\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // If balance is 0 or less, reset to 1000\r\n      const balanceToSave = newBalance > 0 ? newBalance : 1000;\r\n\r\n      const { error } = await supabase\r\n        .from('user_balances')\r\n        .upsert({\r\n          user_id: user.id,\r\n          balance: balanceToSave,\r\n          updated_at: new Date().toISOString()\r\n        }, {\r\n          onConflict: 'user_id'\r\n        });\r\n\r\n      if (error) {\r\n        console.error('Error updating balance:', error);\r\n        // If update fails, keep the local balance but log the error\r\n      } else if (balanceToSave !== newBalance) {\r\n        // If balance was reset, update local state to reflect the reset\r\n        setBalance(balanceToSave);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating balance:', error);\r\n    }\r\n  };\r\n\r\n  // Sign up\r\n  const signUp = async (email, password, username) => {\r\n    try {\r\n      const { data, error } = await supabase.auth.signUp({\r\n        email,\r\n        password,\r\n        options: {\r\n          data: {\r\n            username: username\r\n          },\r\n          emailRedirectTo: window.location.origin\r\n        }\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      // Create user profile\r\n      if (data.user) {\r\n        await supabase\r\n          .from('user_profiles')\r\n          .insert({\r\n            user_id: data.user.id,\r\n            username: username,\r\n            email: email, // Store email for username login lookup\r\n            created_at: new Date().toISOString()\r\n          });\r\n\r\n        // Create balance record\r\n        await createUserBalance(data.user.id, 1000);\r\n        \r\n        // If session exists (email confirmation disabled), set username immediately\r\n        if (data.session) {\r\n          setUsername(username);\r\n          await loadUserBalance(data.user.id);\r\n        } else {\r\n          // Email confirmation required - show message\r\n          return { \r\n            data, \r\n            error: null,\r\n            requiresConfirmation: true \r\n          };\r\n        }\r\n      }\r\n\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      return { data: null, error };\r\n    }\r\n  };\r\n\r\n  // Sign in - accepts either email or username\r\n  const signIn = async (emailOrUsername, password) => {\r\n    try {\r\n      let emailToUse = emailOrUsername;\r\n\r\n      // Check if input is a username (doesn't contain @)\r\n      if (!emailOrUsername.includes('@')) {\r\n        // Look up email by username from user_profiles\r\n        const { data: profileData, error: profileError } = await supabase\r\n          .from('user_profiles')\r\n          .select('email')\r\n          .eq('username', emailOrUsername)\r\n          .single();\r\n\r\n        if (profileError || !profileData || !profileData.email) {\r\n          return { \r\n            data: null, \r\n            error: { message: 'Invalid username or password' } \r\n          };\r\n        }\r\n\r\n        emailToUse = profileData.email;\r\n      }\r\n\r\n      const { data, error } = await supabase.auth.signInWithPassword({\r\n        email: emailToUse,\r\n        password,\r\n      });\r\n\r\n      if (error) throw error;\r\n\r\n      if (data.user) {\r\n        await loadUserBalance(data.user.id);\r\n        await loadUsername(data.user.id);\r\n      }\r\n\r\n      return { data, error: null };\r\n    } catch (error) {\r\n      return { data: null, error };\r\n    }\r\n  };\r\n\r\n  // Sign out\r\n  const signOut = async () => {\r\n    try {\r\n      const { error } = await supabase.auth.signOut();\r\n      if (error) throw error;\r\n      \r\n      // Clear guest mode and reset\r\n      sessionStorage.removeItem('guestMode');\r\n      setUsername('');\r\n      setBalance(1000);\r\n    } catch (error) {\r\n      console.error('Error signing out:', error);\r\n    }\r\n  };\r\n\r\n  // Continue as guest\r\n  const continueAsGuest = () => {\r\n    const guestUsername = generateGuestUsername();\r\n    setUsername(guestUsername);\r\n    setBalance(1000);\r\n    // Store guest mode in sessionStorage so it persists on refresh\r\n    sessionStorage.setItem('guestMode', 'true');\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    session,\r\n    loading,\r\n    balance,\r\n    username,\r\n    setBalance: updateBalance,\r\n    signUp,\r\n    signIn,\r\n    signOut,\r\n    continueAsGuest,\r\n    isGuest: !user\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
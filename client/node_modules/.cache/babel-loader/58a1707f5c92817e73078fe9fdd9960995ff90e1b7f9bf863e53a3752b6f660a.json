{"ast":null,"code":"var _jsxFileName = \"D:\\\\Developer\\\\Personal\\\\Games\\\\Multiplayer-Blackjack\\\\client\\\\src\\\\contexts\\\\GameContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\nimport { SOCKET_SERVER } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GameContext = /*#__PURE__*/createContext();\nexport const useGame = () => {\n  _s();\n  return useContext(GameContext);\n};\n_s(useGame, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const GameProvider = ({\n  children\n}) => {\n  _s2();\n  const [socket, setSocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const [username, setUsername] = useState('');\n  const [balance, setBalance] = useState(1000);\n  const [roomId, setRoomId] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [dealer, setDealer] = useState({\n    cards: [],\n    score: 0\n  });\n  const [gameState, setGameState] = useState('waiting');\n  const [currentTurn, setCurrentTurn] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [error, setError] = useState(null);\n  const [gameHistory, setGameHistory] = useState([]);\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [lastBet, setLastBet] = useState(0);\n  const [hintsEnabled, setHintsEnabled] = useState(true);\n  const [autoSkipNewRound, setAutoSkipNewRound] = useState(true);\n  const navigate = useNavigate();\n\n  // Helper function to add messages to the chat\n  const addMessage = message => {\n    setMessages(prevMessages => [...prevMessages, message]);\n  };\n\n  // Define startNewRound function before it's used in useEffect\n  const startNewRound = useCallback(() => {\n    if (!connected) {\n      console.error(\"Cannot start new round: Not connected to server\");\n      return;\n    }\n    if (!roomId) {\n      console.error(\"Cannot start new round: No room ID\");\n      return;\n    }\n    if (!socket) {\n      console.error(\"Cannot start new round: Socket not initialized\");\n      return;\n    }\n    console.log(`Emitting new_round event for room ${roomId}`);\n    socket.emit('new_round', {\n      roomId\n    });\n  }, [connected, roomId, socket]);\n\n  // Connect to socket server\n  useEffect(() => {\n    const newSocket = io(SOCKET_SERVER);\n    newSocket.on('connect', () => {\n      setSocket(newSocket);\n      setConnected(true);\n      console.log('Connected to server');\n    });\n    newSocket.on('disconnect', () => {\n      setConnected(false);\n      console.log('Disconnected from server');\n    });\n    newSocket.on('error', data => {\n      console.error('Socket error event:', data);\n      setError(data.message);\n      setTimeout(() => setError(null), 5000);\n    });\n\n    // Listen for all socket events for debugging\n    newSocket.onAny((eventName, ...args) => {\n      if (eventName === 'kick_player' || eventName === 'error' || eventName.includes('kick')) {\n        console.log('Socket event received:', eventName, args);\n      }\n    });\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Handle room events\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('room_joined', data => {\n      if (!data) return;\n      setRoomId(data.roomId);\n      setPlayers(data.players || []);\n      setGameState(data.gameState || 'waiting');\n      setError(null);\n\n      // Add system message\n      const playerNames = data.players ? data.players.map(p => p.username).join(', ') : '';\n      addMessage({\n        content: `Room joined. Current players: ${playerNames}`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n\n      // Navigate to game room after successful join\n      navigate('/game-room');\n    });\n    socket.on('player_joined', data => {\n      if (!data || !data.players) return;\n      setPlayers(data.players);\n\n      // Add system message about new player\n      const newPlayer = data.players[data.players.length - 1];\n      if (newPlayer) {\n        addMessage({\n          content: `${newPlayer.username} joined the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    socket.on('player_left', data => {\n      if (!data) return;\n      setPlayers(data.players || []);\n\n      // Add system message about player leaving\n      if (data.leftPlayer) {\n        addMessage({\n          content: `${data.leftPlayer} left the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    socket.on('player_kicked', data => {\n      if (!data) return;\n      setPlayers(data.players || []);\n\n      // Add system message about player being kicked\n      if (data.kickedPlayer) {\n        addMessage({\n          content: `${data.kickedPlayer} was kicked from the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    return () => {\n      socket.off('room_joined');\n      socket.off('player_joined');\n      socket.off('player_left');\n      socket.off('player_kicked');\n    };\n  }, [socket, navigate]);\n\n  // Handle being kicked from room\n  useEffect(() => {\n    if (!socket) return;\n    const handleKicked = data => {\n      // Current player was kicked\n      setError(data.message || 'You have been kicked from the room');\n      // Clear room state\n      setRoomId(null);\n      setPlayers([]);\n      setDealer({\n        cards: [],\n        score: 0\n      });\n      setGameState('waiting');\n      setCurrentTurn(null);\n      setMessages([]);\n      // Navigate to home\n      navigate('/');\n    };\n    socket.on('kicked', handleKicked);\n    return () => {\n      socket.off('kicked', handleKicked);\n    };\n  }, [socket, navigate]);\n\n  // Handle game events\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('game_started', data => {\n      if (!data) return;\n      setGameState('betting');\n      setDealer(data.dealer || {\n        cards: [],\n        score: 0\n      });\n      setPlayers(data.players || []);\n      addMessage({\n        content: 'Game started! Place your bets.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('betting_ended', data => {\n      if (!data) return;\n      setPlayers(data.players || []);\n      setGameState('playing');\n      addMessage({\n        content: 'All bets placed. Game is starting...',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('player_bet_placed', data => {\n      var _data$players;\n      if (!data) return;\n      console.log('ðŸ’° [player_bet_placed] Received bet update:', {\n        playerId: data.playerId,\n        username: data.username,\n        bet: data.bet,\n        playersCount: (_data$players = data.players) === null || _data$players === void 0 ? void 0 : _data$players.length\n      });\n\n      // Update players array with the new bet information using functional update\n      if (data.players && Array.isArray(data.players)) {\n        setPlayers(data.players);\n        console.log('ðŸ’° [player_bet_placed] Updated players array:', data.players.map(p => ({\n          username: p.username,\n          bet: p.bet,\n          balance: p.balance\n        })));\n      }\n\n      // Update balance if it's the current player\n      if (data.playerId === socket.id && data.balance !== undefined) {\n        setBalance(data.balance);\n      }\n    });\n    socket.on('bet_placed', data => {\n      if (!data) return;\n      // Update balance when current player places bet\n      if (data.balance !== undefined) {\n        setBalance(data.balance);\n      }\n    });\n    socket.on('player_turn', data => {\n      setCurrentTurn(data.playerId);\n      setPlayers(data.players || players);\n      const player = data.players && data.players.find(p => p.id === data.playerId);\n      addMessage({\n        content: `It's ${player ? player.username : 'unknown player'}'s turn`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('player_auto_skipped', data => {\n      if (!data) return;\n      setPlayers(data.players || players);\n      setCurrentTurn(null);\n      const player = data.players && data.players.find(p => p.id === data.playerId);\n      addMessage({\n        content: `${player ? player.username : 'A player'} was automatically skipped (30 seconds elapsed)`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('card_dealt', data => {\n      if (!data) return;\n      if (data.to === 'dealer') {\n        setDealer(data.dealer || {\n          cards: [],\n          score: 0\n        });\n      } else if (data.to && data.cards) {\n        setPlayers(prev => prev.map(player => player.id === data.to ? {\n          ...player,\n          cards: data.cards,\n          score: data.score || 0\n        } : player));\n      }\n    });\n    socket.on('turn_ended', data => {\n      if (!data) return;\n      setCurrentTurn(data.nextTurn);\n      setPlayers(data.players || []);\n    });\n    socket.on('dealer_turn', () => {\n      setCurrentTurn('dealer');\n      addMessage({\n        content: `Dealer's turn`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('game_reset', data => {\n      var _data$players2;\n      console.log('ðŸŽ®ðŸŽ®ðŸŽ® GAME_RESET EVENT RECEIVED ðŸŽ®ðŸŽ®ðŸŽ®');\n      console.log('Game reset data:', data);\n      if (!data) {\n        console.error('âŒ No data in game_reset event');\n        return;\n      }\n      console.log('Setting game state to waiting...');\n      setGameState('waiting');\n      setDealer({\n        cards: [],\n        score: 0\n      });\n      setCurrentTurn(null);\n      console.log('Updating players:', data.players);\n      setPlayers(data.players || []);\n\n      // Update balance for current player\n      const currentPlayer = (_data$players2 = data.players) === null || _data$players2 === void 0 ? void 0 : _data$players2.find(p => p.id === socket.id);\n      console.log('Current player in reset data:', currentPlayer);\n      if (currentPlayer) {\n        console.log(`Updating balance: ${currentPlayer.balance}`);\n        setBalance(currentPlayer.balance);\n      } else {\n        console.warn('âš ï¸ Current player not found in reset data');\n      }\n\n      // Add system message\n      addMessage({\n        content: data.message || 'Game has been reset! Everyone starts with $1000 again.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n      console.log('âœ… Game reset complete!');\n    });\n    socket.on('game_ended', data => {\n      var _data$result, _players$;\n      if (!data) return;\n      setGameState('ended');\n      setDealer(data.dealer || {\n        cards: [],\n        score: 0\n      });\n      setPlayers(data.players || []);\n      setCurrentTurn(null);\n\n      // Update game history\n      const historyEntry = {\n        id: Date.now(),\n        dealer: data.dealer,\n        players: data.players,\n        results: ((_data$result = data.result) === null || _data$result === void 0 ? void 0 : _data$result.results) || [],\n        timestamp: Date.now()\n      };\n      setGameHistory(prev => [historyEntry, ...prev].slice(0, 10));\n\n      // Add system message\n      let resultMessage = 'Round ended. Check your results!';\n      if (data.result && data.result.results) {\n        const resultSummary = data.result.results.map(r => `${r.username}: ${r.outcome} (${r.amountChange >= 0 ? '+' : ''}${r.amountChange})`).join(', ');\n        resultMessage = `Round ended. Results: ${resultSummary}`;\n      }\n      addMessage({\n        content: resultMessage,\n        type: 'system',\n        timestamp: Date.now()\n      });\n\n      // If host has auto-next round enabled, automatically start a new round immediately\n      if (autoSkipNewRound && socket.id === ((_players$ = players[0]) === null || _players$ === void 0 ? void 0 : _players$.id)) {\n        var _players$2;\n        console.log(\"Auto next round enabled, starting new round immediately\");\n        console.log(\"Current socket ID:\", socket.id);\n        console.log(\"Host ID (players[0].id):\", (_players$2 = players[0]) === null || _players$2 === void 0 ? void 0 : _players$2.id);\n        console.log(\"autoSkipNewRound value:\", autoSkipNewRound);\n        startNewRound();\n      } else {\n        var _players$3, _players$4;\n        console.log(\"Auto next round not triggered because:\");\n        console.log(\"- autoSkipNewRound:\", autoSkipNewRound);\n        console.log(\"- Is current player the host:\", socket.id === ((_players$3 = players[0]) === null || _players$3 === void 0 ? void 0 : _players$3.id));\n        console.log(\"- Current socket ID:\", socket.id);\n        console.log(\"- Host ID (players[0].id):\", (_players$4 = players[0]) === null || _players$4 === void 0 ? void 0 : _players$4.id);\n      }\n    });\n    socket.on('new_round', data => {\n      var _data$players3, _data$players4;\n      if (!data) return;\n      console.log('ðŸ”„ [new_round] Received new round event:', {\n        playersCount: (_data$players3 = data.players) === null || _data$players3 === void 0 ? void 0 : _data$players3.length,\n        players: (_data$players4 = data.players) === null || _data$players4 === void 0 ? void 0 : _data$players4.map(p => ({\n          username: p.username,\n          bet: p.bet,\n          balance: p.balance\n        }))\n      });\n      setGameState('betting');\n      // Update players array - bets should be 0 at start of new round\n      if (data.players && Array.isArray(data.players)) {\n        setPlayers(data.players);\n      }\n      setDealer(data.dealer || {\n        cards: [],\n        score: 0\n      });\n\n      // Add system message\n      // Only mention manual start if auto-skip is disabled\n      const manualStartMessage = data.isAutoSkip === false ? ' (Manual start by host)' : '';\n      addMessage({\n        content: `New round started${manualStartMessage}. Place your bets!`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('message', data => {\n      addMessage(data);\n    });\n    socket.on('leaderboard_updated', data => {\n      setLeaderboard(data.leaderboard);\n    });\n    socket.on('player_split', data => {\n      var _data$players$find;\n      if (!data) return;\n      setPlayers(data.players || []);\n      addMessage({\n        content: `${((_data$players$find = data.players.find(p => p.id === data.playerId)) === null || _data$players$find === void 0 ? void 0 : _data$players$find.username) || 'Player'} split their hand`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n\n    // Handle player spectating event\n    socket.on('player_spectating', data => {\n      if (!data) return;\n\n      // Update the player's status in the players array\n      setPlayers(prev => prev.map(player => player.id === data.playerId ? {\n        ...player,\n        status: 'spectating'\n      } : player));\n      addMessage({\n        content: `${data.username} is now spectating the game`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n      console.log(`Player ${data.username} is now spectating`);\n    });\n    return () => {\n      socket.off('game_started');\n      socket.off('betting_ended');\n      socket.off('player_bet_placed');\n      socket.off('bet_placed');\n      socket.off('card_dealt');\n      socket.off('player_turn');\n      socket.off('turn_ended');\n      socket.off('dealer_turn');\n      socket.off('game_ended');\n      socket.off('game_reset');\n      socket.off('new_round');\n      socket.off('message');\n      socket.off('leaderboard_updated');\n      socket.off('player_split');\n      socket.off('player_spectating');\n    };\n  }, [socket, autoSkipNewRound, players, startNewRound]);\n\n  // Game actions\n  const createRoom = (username, initialBalance = 1000) => {\n    if (!connected) return;\n    setUsername(username);\n    setBalance(initialBalance);\n    socket.emit('create_room', {\n      username,\n      balance: initialBalance\n    });\n  };\n  const joinRoom = (roomId, username, initialBalance = 1000) => {\n    if (!connected) return;\n    setUsername(username);\n    setBalance(initialBalance);\n    socket.emit('join_room', {\n      roomId,\n      username,\n      balance: initialBalance\n    });\n  };\n  const startGame = () => {\n    if (!connected || !roomId) return;\n    socket.emit('start_game', {\n      roomId\n    });\n  };\n  const placeBet = amount => {\n    if (!connected || !roomId) return;\n    socket.emit('place_bet', {\n      roomId,\n      amount\n    });\n    setLastBet(amount);\n  };\n  const hit = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('hit', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('hit', {\n        roomId\n      });\n    }\n  };\n  const stand = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('stand', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('stand', {\n        roomId\n      });\n    }\n  };\n  const doubleDown = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('double_down', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('double_down', {\n        roomId\n      });\n    }\n  };\n  const split = () => {\n    if (!connected || !roomId || currentTurn !== socket.id) return;\n\n    // Can't split a split hand\n    if (currentTurn.includes('-split')) return;\n    socket.emit('split', {\n      roomId\n    });\n  };\n  const surrender = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('surrender', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('surrender', {\n        roomId\n      });\n    }\n  };\n  const sendMessage = message => {\n    if (!connected || !roomId) return;\n    socket.emit('send_message', {\n      roomId,\n      message,\n      sender: username\n    });\n  };\n  const leaveRoom = () => {\n    if (!connected || !roomId) return;\n    socket.emit('leave_room', {\n      roomId\n    });\n    setRoomId(null);\n    setPlayers([]);\n    setDealer({\n      cards: [],\n      score: 0\n    });\n    setGameState('waiting');\n    setCurrentTurn(null);\n    setMessages([]);\n  };\n  const kickPlayer = playerId => {\n    if (!connected || !roomId) {\n      console.error('Cannot kick player: not connected or no roomId', {\n        connected,\n        roomId\n      });\n      return;\n    }\n    if (!socket) {\n      console.error('Cannot kick player: socket not available');\n      return;\n    }\n    console.log('=== KICK ATTEMPT ===');\n    console.log('RoomId:', roomId);\n    console.log('PlayerId to kick:', playerId);\n    console.log('Socket ID:', socket.id);\n    console.log('Socket connected?', socket.connected);\n    console.log('Socket active?', socket.active);\n\n    // Verify socket is connected before emitting\n    if (!socket.connected) {\n      console.error('âŒ Socket is not connected!');\n      return;\n    }\n\n    // Test if socket can emit at all\n    console.log('Testing socket connection...');\n    socket.emit('ping', {\n      test: 'connection'\n    });\n\n    // Emit the kick event\n    console.log('Emitting kick_player event...');\n    const eventData = {\n      roomId,\n      playerId\n    };\n    console.log('Event data:', eventData);\n    socket.emit('kick_player', eventData);\n    console.log('Event emitted, waiting for response...');\n\n    // Listen for error response\n    const errorTimeout = setTimeout(() => {\n      console.warn('âš ï¸ No response from server after 2 seconds');\n    }, 2000);\n    socket.once('error', error => {\n      clearTimeout(errorTimeout);\n      console.error('âŒ Socket error during kick:', error);\n    });\n    socket.once('player_kicked', data => {\n      clearTimeout(errorTimeout);\n      console.log('âœ… Kick successful:', data);\n    });\n  };\n\n  // Restart game - reset all players' balances to 1000\n  const restartGame = () => {\n    console.log('=== RESTART GAME CALLED ===');\n    console.log('Connected:', connected);\n    console.log('RoomId:', roomId);\n    console.log('Socket:', socket === null || socket === void 0 ? void 0 : socket.id);\n    console.log('Socket connected?', socket === null || socket === void 0 ? void 0 : socket.connected);\n    if (!connected || !roomId) {\n      console.error('Cannot restart game: not connected or no roomId', {\n        connected,\n        roomId\n      });\n      alert('Error: Not connected or no room ID. Please refresh the page.');\n      return;\n    }\n    if (!socket) {\n      console.error('Cannot restart game: socket not available');\n      alert('Error: Socket not available. Please refresh the page.');\n      return;\n    }\n    if (!socket.connected) {\n      console.error('Socket is not connected!');\n      alert('Error: Not connected to server. Please refresh the page.');\n      return;\n    }\n    console.log('âœ… Emitting restart_game event for room:', roomId);\n    console.log('Event payload:', {\n      roomId\n    });\n\n    // Emit the restart event\n    socket.emit('restart_game', {\n      roomId\n    }, response => {\n      // Callback for acknowledgment (if server supports it)\n      console.log('Server response:', response);\n    });\n\n    // Listen for error response\n    socket.once('error', error => {\n      console.error('âŒ Error restarting game:', error);\n      if (error && error.message) {\n        alert(`Error: ${error.message}`);\n      } else if (error) {\n        alert(`Error: ${JSON.stringify(error)}`);\n      }\n    });\n\n    // Also listen for any response after a short delay\n    setTimeout(() => {\n      console.log('Checking if game_reset was received...');\n    }, 1000);\n  };\n\n  // Check if it's current player's turn\n  const isPlayerTurn = () => {\n    if (!socket || !currentTurn) return false;\n\n    // Direct match with player's socket ID\n    if (currentTurn === socket.id) return true;\n\n    // Check if it's the player's split hand turn\n    // Split hands have IDs in the format: originalPlayerId-split\n    if (currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      return originalPlayerId === socket.id;\n    }\n    return false;\n  };\n\n  // Find the current player\n  const getCurrentPlayer = () => {\n    if (!socket || !players) return null;\n\n    // First check for the player's main hand\n    const player = players.find(p => p.id === socket.id);\n\n    // If it's the player's split hand turn, return that hand instead\n    if (currentTurn && currentTurn.includes('-split')) {\n      const splitHand = players.find(p => p.id === currentTurn);\n      if (splitHand && splitHand.originalPlayer === socket.id) {\n        return splitHand;\n      }\n    }\n    return player;\n  };\n\n  // Toggle hints\n  const toggleHints = () => {\n    setHintsEnabled(prev => !prev);\n  };\n  return /*#__PURE__*/_jsxDEV(GameContext.Provider, {\n    value: {\n      connected,\n      username,\n      balance,\n      roomId,\n      players,\n      dealer,\n      gameState,\n      currentTurn,\n      messages,\n      error,\n      gameHistory,\n      leaderboard,\n      lastBet,\n      hintsEnabled,\n      autoSkipNewRound,\n      createRoom,\n      joinRoom,\n      startGame,\n      placeBet,\n      hit,\n      stand,\n      doubleDown,\n      split,\n      surrender,\n      startNewRound,\n      sendMessage,\n      leaveRoom,\n      kickPlayer,\n      restartGame,\n      isPlayerTurn,\n      getCurrentPlayer,\n      toggleHints,\n      setAutoSkipNewRound,\n      socket\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 732,\n    columnNumber: 5\n  }, this);\n};\n_s2(GameProvider, \"IPDQ6hckHEgJYOMCHCpyPqGGdcA=\", false, function () {\n  return [useNavigate];\n});\n_c = GameProvider;\nvar _c;\n$RefreshReg$(_c, \"GameProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","io","useNavigate","SOCKET_SERVER","jsxDEV","_jsxDEV","GameContext","useGame","_s","GameProvider","children","_s2","socket","setSocket","connected","setConnected","username","setUsername","balance","setBalance","roomId","setRoomId","players","setPlayers","dealer","setDealer","cards","score","gameState","setGameState","currentTurn","setCurrentTurn","messages","setMessages","error","setError","gameHistory","setGameHistory","leaderboard","setLeaderboard","lastBet","setLastBet","hintsEnabled","setHintsEnabled","autoSkipNewRound","setAutoSkipNewRound","navigate","addMessage","message","prevMessages","startNewRound","console","log","emit","newSocket","on","data","setTimeout","onAny","eventName","args","includes","disconnect","playerNames","map","p","join","content","type","timestamp","Date","now","newPlayer","length","leftPlayer","kickedPlayer","off","handleKicked","_data$players","playerId","bet","playersCount","Array","isArray","id","undefined","player","find","to","prev","nextTurn","_data$players2","currentPlayer","warn","_data$result","_players$","historyEntry","results","result","slice","resultMessage","resultSummary","r","outcome","amountChange","_players$2","_players$3","_players$4","_data$players3","_data$players4","manualStartMessage","isAutoSkip","_data$players$find","status","createRoom","initialBalance","joinRoom","startGame","placeBet","amount","hit","originalPlayerId","split","handId","stand","doubleDown","surrender","sendMessage","sender","leaveRoom","kickPlayer","active","test","eventData","errorTimeout","once","clearTimeout","restartGame","alert","response","JSON","stringify","isPlayerTurn","getCurrentPlayer","splitHand","originalPlayer","toggleHints","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Developer/Personal/Games/Multiplayer-Blackjack/client/src/contexts/GameContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { SOCKET_SERVER } from '../config';\r\n\r\nexport const GameContext = createContext();\r\n\r\nexport const useGame = () => useContext(GameContext);\r\n\r\nexport const GameProvider = ({ children }) => {\r\n  const [socket, setSocket] = useState(null);\r\n  const [connected, setConnected] = useState(false);\r\n  const [username, setUsername] = useState('');\r\n  const [balance, setBalance] = useState(1000);\r\n  const [roomId, setRoomId] = useState(null);\r\n  const [players, setPlayers] = useState([]);\r\n  const [dealer, setDealer] = useState({ cards: [], score: 0 });\r\n  const [gameState, setGameState] = useState('waiting');\r\n  const [currentTurn, setCurrentTurn] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [gameHistory, setGameHistory] = useState([]);\r\n  const [leaderboard, setLeaderboard] = useState([]);\r\n  const [lastBet, setLastBet] = useState(0);\r\n  const [hintsEnabled, setHintsEnabled] = useState(true);\r\n  const [autoSkipNewRound, setAutoSkipNewRound] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  // Helper function to add messages to the chat\r\n  const addMessage = (message) => {\r\n    setMessages(prevMessages => [...prevMessages, message]);\r\n  };\r\n\r\n  // Define startNewRound function before it's used in useEffect\r\n  const startNewRound = useCallback(() => {\r\n    if (!connected) {\r\n      console.error(\"Cannot start new round: Not connected to server\");\r\n      return;\r\n    }\r\n    \r\n    if (!roomId) {\r\n      console.error(\"Cannot start new round: No room ID\");\r\n      return;\r\n    }\r\n    \r\n    if (!socket) {\r\n      console.error(\"Cannot start new round: Socket not initialized\");\r\n      return;\r\n    }\r\n    \r\n    console.log(`Emitting new_round event for room ${roomId}`);\r\n    socket.emit('new_round', { roomId });\r\n  }, [connected, roomId, socket]);\r\n\r\n  // Connect to socket server\r\n  useEffect(() => {\r\n    const newSocket = io(SOCKET_SERVER);\r\n    \r\n    newSocket.on('connect', () => {\r\n      setSocket(newSocket);\r\n      setConnected(true);\r\n      console.log('Connected to server');\r\n    });\r\n    \r\n    newSocket.on('disconnect', () => {\r\n      setConnected(false);\r\n      console.log('Disconnected from server');\r\n    });\r\n    \r\n    newSocket.on('error', (data) => {\r\n      console.error('Socket error event:', data);\r\n      setError(data.message);\r\n      setTimeout(() => setError(null), 5000);\r\n    });\r\n    \r\n    // Listen for all socket events for debugging\r\n    newSocket.onAny((eventName, ...args) => {\r\n      if (eventName === 'kick_player' || eventName === 'error' || eventName.includes('kick')) {\r\n        console.log('Socket event received:', eventName, args);\r\n      }\r\n    });\r\n    \r\n    return () => {\r\n      newSocket.disconnect();\r\n    };\r\n  }, []);\r\n  \r\n  // Handle room events\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n    \r\n    socket.on('room_joined', (data) => {\r\n      if (!data) return;\r\n      setRoomId(data.roomId);\r\n      setPlayers(data.players || []);\r\n      setGameState(data.gameState || 'waiting');\r\n      setError(null);\r\n      \r\n      // Add system message\r\n      const playerNames = data.players ? data.players.map(p => p.username).join(', ') : '';\r\n      addMessage({\r\n        content: `Room joined. Current players: ${playerNames}`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n\r\n      // Navigate to game room after successful join\r\n      navigate('/game-room');\r\n    });\r\n    \r\n    socket.on('player_joined', (data) => {\r\n      if (!data || !data.players) return;\r\n      setPlayers(data.players);\r\n      \r\n      // Add system message about new player\r\n      const newPlayer = data.players[data.players.length - 1];\r\n      if (newPlayer) {\r\n        addMessage({\r\n          content: `${newPlayer.username} joined the room`,\r\n          type: 'system',\r\n          timestamp: Date.now()\r\n        });\r\n      }\r\n    });\r\n    \r\n    socket.on('player_left', (data) => {\r\n      if (!data) return;\r\n      setPlayers(data.players || []);\r\n      \r\n      // Add system message about player leaving\r\n      if (data.leftPlayer) {\r\n        addMessage({\r\n          content: `${data.leftPlayer} left the room`,\r\n          type: 'system',\r\n          timestamp: Date.now()\r\n        });\r\n      }\r\n    });\r\n    \r\n    socket.on('player_kicked', (data) => {\r\n      if (!data) return;\r\n      setPlayers(data.players || []);\r\n      \r\n      // Add system message about player being kicked\r\n      if (data.kickedPlayer) {\r\n        addMessage({\r\n          content: `${data.kickedPlayer} was kicked from the room`,\r\n          type: 'system',\r\n          timestamp: Date.now()\r\n        });\r\n      }\r\n    });\r\n    \r\n    return () => {\r\n      socket.off('room_joined');\r\n      socket.off('player_joined');\r\n      socket.off('player_left');\r\n      socket.off('player_kicked');\r\n    };\r\n  }, [socket, navigate]);\r\n  \r\n  // Handle being kicked from room\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n    \r\n    const handleKicked = (data) => {\r\n      // Current player was kicked\r\n      setError(data.message || 'You have been kicked from the room');\r\n      // Clear room state\r\n      setRoomId(null);\r\n      setPlayers([]);\r\n      setDealer({ cards: [], score: 0 });\r\n      setGameState('waiting');\r\n      setCurrentTurn(null);\r\n      setMessages([]);\r\n      // Navigate to home\r\n      navigate('/');\r\n    };\r\n    \r\n    socket.on('kicked', handleKicked);\r\n    \r\n    return () => {\r\n      socket.off('kicked', handleKicked);\r\n    };\r\n  }, [socket, navigate]);\r\n  \r\n  // Handle game events\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n    \r\n    socket.on('game_started', (data) => {\r\n      if (!data) return;\r\n      setGameState('betting');\r\n      setDealer(data.dealer || { cards: [], score: 0 });\r\n      setPlayers(data.players || []);\r\n      \r\n      addMessage({\r\n        content: 'Game started! Place your bets.',\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    socket.on('betting_ended', (data) => {\r\n      if (!data) return;\r\n      setPlayers(data.players || []);\r\n      setGameState('playing');\r\n      \r\n      addMessage({\r\n        content: 'All bets placed. Game is starting...',\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    socket.on('player_bet_placed', (data) => {\r\n      if (!data) return;\r\n      console.log('ðŸ’° [player_bet_placed] Received bet update:', {\r\n        playerId: data.playerId,\r\n        username: data.username,\r\n        bet: data.bet,\r\n        playersCount: data.players?.length\r\n      });\r\n      \r\n      // Update players array with the new bet information using functional update\r\n      if (data.players && Array.isArray(data.players)) {\r\n        setPlayers(data.players);\r\n        console.log('ðŸ’° [player_bet_placed] Updated players array:', data.players.map(p => ({\r\n          username: p.username,\r\n          bet: p.bet,\r\n          balance: p.balance\r\n        })));\r\n      }\r\n      \r\n      // Update balance if it's the current player\r\n      if (data.playerId === socket.id && data.balance !== undefined) {\r\n        setBalance(data.balance);\r\n      }\r\n    });\r\n    \r\n    socket.on('bet_placed', (data) => {\r\n      if (!data) return;\r\n      // Update balance when current player places bet\r\n      if (data.balance !== undefined) {\r\n        setBalance(data.balance);\r\n      }\r\n    });\r\n    \r\n    socket.on('player_turn', (data) => {\r\n      setCurrentTurn(data.playerId);\r\n      setPlayers(data.players || players);\r\n      \r\n      const player = data.players && data.players.find(p => p.id === data.playerId);\r\n      \r\n      addMessage({\r\n        content: `It's ${player ? player.username : 'unknown player'}'s turn`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    socket.on('player_auto_skipped', (data) => {\r\n      if (!data) return;\r\n      setPlayers(data.players || players);\r\n      setCurrentTurn(null);\r\n      \r\n      const player = data.players && data.players.find(p => p.id === data.playerId);\r\n      \r\n      addMessage({\r\n        content: `${player ? player.username : 'A player'} was automatically skipped (30 seconds elapsed)`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    socket.on('card_dealt', (data) => {\r\n      if (!data) return;\r\n      if (data.to === 'dealer') {\r\n        setDealer(data.dealer || { cards: [], score: 0 });\r\n      } else if (data.to && data.cards) {\r\n        setPlayers(prev => \r\n          prev.map(player => \r\n            player.id === data.to ? { ...player, cards: data.cards, score: data.score || 0 } : player\r\n          )\r\n        );\r\n      }\r\n    });\r\n    \r\n    socket.on('turn_ended', (data) => {\r\n      if (!data) return;\r\n      setCurrentTurn(data.nextTurn);\r\n      setPlayers(data.players || []);\r\n    });\r\n    \r\n    socket.on('dealer_turn', () => {\r\n      setCurrentTurn('dealer');\r\n      \r\n      addMessage({\r\n        content: `Dealer's turn`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    socket.on('game_reset', (data) => {\r\n      console.log('ðŸŽ®ðŸŽ®ðŸŽ® GAME_RESET EVENT RECEIVED ðŸŽ®ðŸŽ®ðŸŽ®');\r\n      console.log('Game reset data:', data);\r\n      \r\n      if (!data) {\r\n        console.error('âŒ No data in game_reset event');\r\n        return;\r\n      }\r\n      \r\n      console.log('Setting game state to waiting...');\r\n      setGameState('waiting');\r\n      setDealer({ cards: [], score: 0 });\r\n      setCurrentTurn(null);\r\n      \r\n      console.log('Updating players:', data.players);\r\n      setPlayers(data.players || []);\r\n      \r\n      // Update balance for current player\r\n      const currentPlayer = data.players?.find(p => p.id === socket.id);\r\n      console.log('Current player in reset data:', currentPlayer);\r\n      if (currentPlayer) {\r\n        console.log(`Updating balance: ${currentPlayer.balance}`);\r\n        setBalance(currentPlayer.balance);\r\n      } else {\r\n        console.warn('âš ï¸ Current player not found in reset data');\r\n      }\r\n      \r\n      // Add system message\r\n      addMessage({\r\n        content: data.message || 'Game has been reset! Everyone starts with $1000 again.',\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n      \r\n      console.log('âœ… Game reset complete!');\r\n    });\r\n    \r\n    socket.on('game_ended', (data) => {\r\n      if (!data) return;\r\n      setGameState('ended');\r\n      setDealer(data.dealer || { cards: [], score: 0 });\r\n      setPlayers(data.players || []);\r\n      setCurrentTurn(null);\r\n      \r\n      // Update game history\r\n      const historyEntry = {\r\n        id: Date.now(),\r\n        dealer: data.dealer,\r\n        players: data.players,\r\n        results: data.result?.results || [],\r\n        timestamp: Date.now()\r\n      };\r\n      setGameHistory(prev => [historyEntry, ...prev].slice(0, 10));\r\n      \r\n      // Add system message\r\n      let resultMessage = 'Round ended. Check your results!';\r\n      if (data.result && data.result.results) {\r\n        const resultSummary = data.result.results\r\n          .map(r => `${r.username}: ${r.outcome} (${r.amountChange >= 0 ? '+' : ''}${r.amountChange})`)\r\n          .join(', ');\r\n        resultMessage = `Round ended. Results: ${resultSummary}`;\r\n      }\r\n      \r\n      addMessage({\r\n        content: resultMessage,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n      \r\n      // If host has auto-next round enabled, automatically start a new round immediately\r\n      if (autoSkipNewRound && socket.id === players[0]?.id) {\r\n        console.log(\"Auto next round enabled, starting new round immediately\");\r\n        console.log(\"Current socket ID:\", socket.id);\r\n        console.log(\"Host ID (players[0].id):\", players[0]?.id);\r\n        console.log(\"autoSkipNewRound value:\", autoSkipNewRound);\r\n        startNewRound();\r\n      } else {\r\n        console.log(\"Auto next round not triggered because:\");\r\n        console.log(\"- autoSkipNewRound:\", autoSkipNewRound);\r\n        console.log(\"- Is current player the host:\", socket.id === players[0]?.id);\r\n        console.log(\"- Current socket ID:\", socket.id);\r\n        console.log(\"- Host ID (players[0].id):\", players[0]?.id);\r\n      }\r\n    });\r\n    \r\n    socket.on('new_round', (data) => {\r\n      if (!data) return;\r\n      console.log('ðŸ”„ [new_round] Received new round event:', {\r\n        playersCount: data.players?.length,\r\n        players: data.players?.map(p => ({ username: p.username, bet: p.bet, balance: p.balance }))\r\n      });\r\n      \r\n      setGameState('betting');\r\n      // Update players array - bets should be 0 at start of new round\r\n      if (data.players && Array.isArray(data.players)) {\r\n        setPlayers(data.players);\r\n      }\r\n      setDealer(data.dealer || { cards: [], score: 0 });\r\n      \r\n      // Add system message\r\n      // Only mention manual start if auto-skip is disabled\r\n      const manualStartMessage = data.isAutoSkip === false ? ' (Manual start by host)' : '';\r\n      addMessage({\r\n        content: `New round started${manualStartMessage}. Place your bets!`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    socket.on('message', (data) => {\r\n      addMessage(data);\r\n    });\r\n    \r\n    socket.on('leaderboard_updated', (data) => {\r\n      setLeaderboard(data.leaderboard);\r\n    });\r\n    \r\n    socket.on('player_split', (data) => {\r\n      if (!data) return;\r\n      setPlayers(data.players || []);\r\n      \r\n      addMessage({\r\n        content: `${data.players.find(p => p.id === data.playerId)?.username || 'Player'} split their hand`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n    });\r\n    \r\n    // Handle player spectating event\r\n    socket.on('player_spectating', (data) => {\r\n      if (!data) return;\r\n      \r\n      // Update the player's status in the players array\r\n      setPlayers(prev => \r\n        prev.map(player => \r\n          player.id === data.playerId \r\n            ? { ...player, status: 'spectating' } \r\n            : player\r\n        )\r\n      );\r\n      \r\n      addMessage({\r\n        content: `${data.username} is now spectating the game`,\r\n        type: 'system',\r\n        timestamp: Date.now()\r\n      });\r\n      \r\n      console.log(`Player ${data.username} is now spectating`);\r\n    });\r\n    \r\n    return () => {\r\n      socket.off('game_started');\r\n      socket.off('betting_ended');\r\n      socket.off('player_bet_placed');\r\n      socket.off('bet_placed');\r\n      socket.off('card_dealt');\r\n      socket.off('player_turn');\r\n      socket.off('turn_ended');\r\n      socket.off('dealer_turn');\r\n      socket.off('game_ended');\r\n      socket.off('game_reset');\r\n      socket.off('new_round');\r\n      socket.off('message');\r\n      socket.off('leaderboard_updated');\r\n      socket.off('player_split');\r\n      socket.off('player_spectating');\r\n    };\r\n  }, [socket, autoSkipNewRound, players, startNewRound]);\r\n  \r\n  // Game actions\r\n  const createRoom = (username, initialBalance = 1000) => {\r\n    if (!connected) return;\r\n    \r\n    setUsername(username);\r\n    setBalance(initialBalance);\r\n    socket.emit('create_room', { username, balance: initialBalance });\r\n  };\r\n  \r\n  const joinRoom = (roomId, username, initialBalance = 1000) => {\r\n    if (!connected) return;\r\n    \r\n    setUsername(username);\r\n    setBalance(initialBalance);\r\n    socket.emit('join_room', { roomId, username, balance: initialBalance });\r\n  };\r\n  \r\n  const startGame = () => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    socket.emit('start_game', { roomId });\r\n  };\r\n  \r\n  const placeBet = (amount) => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    socket.emit('place_bet', { roomId, amount });\r\n    setLastBet(amount);\r\n  };\r\n  \r\n  const hit = () => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    // For split hands, we need to use the original player's socket ID\r\n    if (currentTurn && currentTurn.includes('-split')) {\r\n      const originalPlayerId = currentTurn.split('-')[0];\r\n      if (originalPlayerId === socket.id) {\r\n        socket.emit('hit', { roomId, handId: currentTurn });\r\n      }\r\n    } else if (currentTurn === socket.id) {\r\n      socket.emit('hit', { roomId });\r\n    }\r\n  };\r\n  \r\n  const stand = () => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    // For split hands, we need to use the original player's socket ID\r\n    if (currentTurn && currentTurn.includes('-split')) {\r\n      const originalPlayerId = currentTurn.split('-')[0];\r\n      if (originalPlayerId === socket.id) {\r\n        socket.emit('stand', { roomId, handId: currentTurn });\r\n      }\r\n    } else if (currentTurn === socket.id) {\r\n      socket.emit('stand', { roomId });\r\n    }\r\n  };\r\n  \r\n  const doubleDown = () => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    // For split hands, we need to use the original player's socket ID\r\n    if (currentTurn && currentTurn.includes('-split')) {\r\n      const originalPlayerId = currentTurn.split('-')[0];\r\n      if (originalPlayerId === socket.id) {\r\n        socket.emit('double_down', { roomId, handId: currentTurn });\r\n      }\r\n    } else if (currentTurn === socket.id) {\r\n      socket.emit('double_down', { roomId });\r\n    }\r\n  };\r\n  \r\n  const split = () => {\r\n    if (!connected || !roomId || currentTurn !== socket.id) return;\r\n    \r\n    // Can't split a split hand\r\n    if (currentTurn.includes('-split')) return;\r\n    \r\n    socket.emit('split', { roomId });\r\n  };\r\n  \r\n  const surrender = () => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    // For split hands, we need to use the original player's socket ID\r\n    if (currentTurn && currentTurn.includes('-split')) {\r\n      const originalPlayerId = currentTurn.split('-')[0];\r\n      if (originalPlayerId === socket.id) {\r\n        socket.emit('surrender', { roomId, handId: currentTurn });\r\n      }\r\n    } else if (currentTurn === socket.id) {\r\n      socket.emit('surrender', { roomId });\r\n    }\r\n  };\r\n  \r\n  const sendMessage = (message) => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    socket.emit('send_message', { roomId, message, sender: username });\r\n  };\r\n  \r\n  const leaveRoom = () => {\r\n    if (!connected || !roomId) return;\r\n    \r\n    socket.emit('leave_room', { roomId });\r\n    setRoomId(null);\r\n    setPlayers([]);\r\n    setDealer({ cards: [], score: 0 });\r\n    setGameState('waiting');\r\n    setCurrentTurn(null);\r\n    setMessages([]);\r\n  };\r\n  \r\n  const kickPlayer = (playerId) => {\r\n    if (!connected || !roomId) {\r\n      console.error('Cannot kick player: not connected or no roomId', { connected, roomId });\r\n      return;\r\n    }\r\n    \r\n    if (!socket) {\r\n      console.error('Cannot kick player: socket not available');\r\n      return;\r\n    }\r\n    \r\n    console.log('=== KICK ATTEMPT ===');\r\n    console.log('RoomId:', roomId);\r\n    console.log('PlayerId to kick:', playerId);\r\n    console.log('Socket ID:', socket.id);\r\n    console.log('Socket connected?', socket.connected);\r\n    console.log('Socket active?', socket.active);\r\n    \r\n    // Verify socket is connected before emitting\r\n    if (!socket.connected) {\r\n      console.error('âŒ Socket is not connected!');\r\n      return;\r\n    }\r\n    \r\n    // Test if socket can emit at all\r\n    console.log('Testing socket connection...');\r\n    socket.emit('ping', { test: 'connection' });\r\n    \r\n    // Emit the kick event\r\n    console.log('Emitting kick_player event...');\r\n    const eventData = { roomId, playerId };\r\n    console.log('Event data:', eventData);\r\n    \r\n    socket.emit('kick_player', eventData);\r\n    \r\n    console.log('Event emitted, waiting for response...');\r\n    \r\n    // Listen for error response\r\n    const errorTimeout = setTimeout(() => {\r\n      console.warn('âš ï¸ No response from server after 2 seconds');\r\n    }, 2000);\r\n    \r\n    socket.once('error', (error) => {\r\n      clearTimeout(errorTimeout);\r\n      console.error('âŒ Socket error during kick:', error);\r\n    });\r\n    \r\n    socket.once('player_kicked', (data) => {\r\n      clearTimeout(errorTimeout);\r\n      console.log('âœ… Kick successful:', data);\r\n    });\r\n  };\r\n\r\n  // Restart game - reset all players' balances to 1000\r\n  const restartGame = () => {\r\n    console.log('=== RESTART GAME CALLED ===');\r\n    console.log('Connected:', connected);\r\n    console.log('RoomId:', roomId);\r\n    console.log('Socket:', socket?.id);\r\n    console.log('Socket connected?', socket?.connected);\r\n    \r\n    if (!connected || !roomId) {\r\n      console.error('Cannot restart game: not connected or no roomId', { connected, roomId });\r\n      alert('Error: Not connected or no room ID. Please refresh the page.');\r\n      return;\r\n    }\r\n    \r\n    if (!socket) {\r\n      console.error('Cannot restart game: socket not available');\r\n      alert('Error: Socket not available. Please refresh the page.');\r\n      return;\r\n    }\r\n    \r\n    if (!socket.connected) {\r\n      console.error('Socket is not connected!');\r\n      alert('Error: Not connected to server. Please refresh the page.');\r\n      return;\r\n    }\r\n    \r\n    console.log('âœ… Emitting restart_game event for room:', roomId);\r\n    console.log('Event payload:', { roomId });\r\n    \r\n    // Emit the restart event\r\n    socket.emit('restart_game', { roomId }, (response) => {\r\n      // Callback for acknowledgment (if server supports it)\r\n      console.log('Server response:', response);\r\n    });\r\n    \r\n    // Listen for error response\r\n    socket.once('error', (error) => {\r\n      console.error('âŒ Error restarting game:', error);\r\n      if (error && error.message) {\r\n        alert(`Error: ${error.message}`);\r\n      } else if (error) {\r\n        alert(`Error: ${JSON.stringify(error)}`);\r\n      }\r\n    });\r\n    \r\n    // Also listen for any response after a short delay\r\n    setTimeout(() => {\r\n      console.log('Checking if game_reset was received...');\r\n    }, 1000);\r\n  };\r\n  \r\n  // Check if it's current player's turn\r\n  const isPlayerTurn = () => {\r\n    if (!socket || !currentTurn) return false;\r\n    \r\n    // Direct match with player's socket ID\r\n    if (currentTurn === socket.id) return true;\r\n    \r\n    // Check if it's the player's split hand turn\r\n    // Split hands have IDs in the format: originalPlayerId-split\r\n    if (currentTurn.includes('-split')) {\r\n      const originalPlayerId = currentTurn.split('-')[0];\r\n      return originalPlayerId === socket.id;\r\n    }\r\n    \r\n    return false;\r\n  };\r\n  \r\n  // Find the current player\r\n  const getCurrentPlayer = () => {\r\n    if (!socket || !players) return null;\r\n    \r\n    // First check for the player's main hand\r\n    const player = players.find(p => p.id === socket.id);\r\n    \r\n    // If it's the player's split hand turn, return that hand instead\r\n    if (currentTurn && currentTurn.includes('-split')) {\r\n      const splitHand = players.find(p => p.id === currentTurn);\r\n      if (splitHand && splitHand.originalPlayer === socket.id) {\r\n        return splitHand;\r\n      }\r\n    }\r\n    \r\n    return player;\r\n  };\r\n  \r\n  // Toggle hints\r\n  const toggleHints = () => {\r\n    setHintsEnabled(prev => !prev);\r\n  };\r\n\r\n  return (\r\n    <GameContext.Provider\r\n      value={{\r\n        connected,\r\n        username,\r\n        balance,\r\n        roomId,\r\n        players,\r\n        dealer,\r\n        gameState,\r\n        currentTurn,\r\n        messages,\r\n        error,\r\n        gameHistory,\r\n        leaderboard,\r\n        lastBet,\r\n        hintsEnabled,\r\n        autoSkipNewRound,\r\n        createRoom,\r\n        joinRoom,\r\n        startGame,\r\n        placeBet,\r\n        hit,\r\n        stand,\r\n        doubleDown,\r\n        split,\r\n        surrender,\r\n        startNewRound,\r\n        sendMessage,\r\n        leaveRoom,\r\n        kickPlayer,\r\n        restartGame,\r\n        isPlayerTurn,\r\n        getCurrentPlayer,\r\n        toggleHints,\r\n        setAutoSkipNewRound,\r\n        socket\r\n      }}\r\n    >\r\n      {children}\r\n    </GameContext.Provider>\r\n  );\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
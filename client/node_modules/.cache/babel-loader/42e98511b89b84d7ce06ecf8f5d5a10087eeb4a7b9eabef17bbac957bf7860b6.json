{"ast":null,"code":"var _jsxFileName = \"D:\\\\Developer\\\\Personal\\\\Games\\\\Multiplayer-Blackjack\\\\client\\\\src\\\\contexts\\\\GameContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext';\nimport { SOCKET_SERVER } from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GameContext = /*#__PURE__*/createContext();\nexport const useGame = () => {\n  _s();\n  return useContext(GameContext);\n};\n_s(useGame, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const GameProvider = ({\n  children\n}) => {\n  _s2();\n  const {\n    username: authUsername,\n    balance: authBalance,\n    setBalance: updateAuthBalance\n  } = useAuth();\n  const [socket, setSocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const [username, setUsername] = useState(authUsername || '');\n  const [balance, setBalance] = useState(authBalance || 1000);\n\n  // Sync with auth context when it changes\n  useEffect(() => {\n    if (authUsername) {\n      setUsername(authUsername);\n    }\n    if (authBalance !== undefined) {\n      setBalance(authBalance);\n    }\n  }, [authUsername, authBalance]);\n  const [roomId, setRoomId] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [dealer, setDealer] = useState({\n    cards: [],\n    score: 0\n  });\n  const [gameState, setGameState] = useState('waiting');\n  const [currentTurn, setCurrentTurn] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [error, setError] = useState(null);\n  const [gameHistory, setGameHistory] = useState([]);\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [lastBet, setLastBet] = useState(0);\n  const [hintsEnabled, setHintsEnabled] = useState(true);\n  const [autoSkipNewRound, setAutoSkipNewRound] = useState(true);\n  const [isPickingUpCards, setIsPickingUpCards] = useState(false);\n  const [showVotePrompt, setShowVotePrompt] = useState(false);\n  const [voteStatus, setVoteStatus] = useState(null);\n  const [hasVoted, setHasVoted] = useState(false);\n  const navigate = useNavigate();\n\n  // Helper function to add messages to the chat\n  const addMessage = message => {\n    setMessages(prevMessages => [...prevMessages, message]);\n  };\n\n  // Define startNewRound function before it's used in useEffect\n  const startNewRound = useCallback(() => {\n    if (!connected || !roomId || !socket) return;\n    socket.emit('new_round', {\n      roomId\n    });\n  }, [connected, roomId, socket]);\n\n  // Connect to socket server\n  useEffect(() => {\n    const newSocket = io(SOCKET_SERVER, {\n      transports: ['polling', 'websocket'],\n      reconnection: true,\n      reconnectionDelay: 2000,\n      reconnectionAttempts: 10,\n      timeout: 30000,\n      forceNew: true,\n      upgrade: true,\n      rememberUpgrade: false\n    });\n    setSocket(newSocket);\n    newSocket.on('connect', () => {\n      setConnected(true);\n      setError(null);\n    });\n    newSocket.on('connect_error', error => {\n      setConnected(false);\n      const errorMsg = error.message || 'Connection refused';\n      setError(`Failed to connect to server: ${errorMsg}. The server may be sleeping. Try visiting https://multiplayer-blackjack-7df9.onrender.com to wake it up, then refresh this page.`);\n    });\n    newSocket.on('reconnect', () => {\n      setConnected(true);\n      setError(null);\n    });\n    newSocket.on('reconnect_failed', () => {\n      setError('Unable to connect to server. Please check if the server is running and refresh the page.');\n    });\n    newSocket.on('disconnect', reason => {\n      setConnected(false);\n      if (reason === 'io server disconnect') {\n        setError('Disconnected by server. Please refresh the page.');\n      }\n    });\n    newSocket.on('error', data => {\n      setError(data.message || 'An error occurred');\n      setTimeout(() => setError(null), 5000);\n    });\n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Handle room events\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('room_joined', data => {\n      if (!data) return;\n      setRoomId(data.roomId);\n      setPlayers(data.players || []);\n      setGameState(data.gameState || 'waiting');\n      setError(null);\n\n      // Add system message\n      const playerNames = data.players ? data.players.map(p => p.username).join(', ') : '';\n      addMessage({\n        content: `Room joined. Current players: ${playerNames}`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n\n      // Navigate to game room after successful join\n      navigate('/game-room');\n    });\n    socket.on('player_joined', data => {\n      if (!data || !data.players) return;\n      setPlayers(data.players);\n\n      // Add system message about new player\n      const newPlayer = data.players[data.players.length - 1];\n      if (newPlayer) {\n        addMessage({\n          content: `${newPlayer.username} joined the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    socket.on('player_left', data => {\n      if (!data) return;\n      setPlayers(data.players || []);\n\n      // Add system message about player leaving\n      if (data.leftPlayer) {\n        const message = data.wasHost ? `${data.leftPlayer} (host) disconnected from the room` : `${data.leftPlayer} disconnected from the room`;\n        addMessage({\n          content: message,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    socket.on('room_update', data => {\n      if (!data) return;\n      if (data.players) setPlayers(data.players);\n      if (data.gameState) setGameState(data.gameState);\n      if (data.dealer) setDealer(data.dealer);\n    });\n    socket.on('game_state_update', data => {\n      if (!data) return;\n      if (data.gameState) setGameState(data.gameState);\n      if (data.players) setPlayers(data.players);\n      if (data.dealer) setDealer(data.dealer);\n      if (data.gameState === 'waiting') {\n        addMessage({\n          content: 'Game reset to waiting state - all players disconnected',\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    socket.on('player_kicked', data => {\n      if (!data) return;\n      setPlayers(data.players || []);\n\n      // Add system message about player being kicked\n      if (data.kickedPlayer) {\n        addMessage({\n          content: `${data.kickedPlayer} was kicked from the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    return () => {\n      socket.off('room_joined');\n      socket.off('player_joined');\n      socket.off('player_left');\n      socket.off('player_kicked');\n      socket.off('room_update');\n      socket.off('game_state_update');\n    };\n  }, [socket, navigate]);\n\n  // Handle being kicked from room\n  useEffect(() => {\n    if (!socket) return;\n    const handleKicked = data => {\n      // Current player was kicked\n      setError(data.message || 'You have been kicked from the room');\n      // Clear room state\n      setRoomId(null);\n      setPlayers([]);\n      setDealer({\n        cards: [],\n        score: 0\n      });\n      setGameState('waiting');\n      setCurrentTurn(null);\n      setMessages([]);\n      // Navigate to home\n      navigate('/');\n    };\n    socket.on('kicked', handleKicked);\n    return () => {\n      socket.off('kicked', handleKicked);\n    };\n  }, [socket, navigate]);\n\n  // Handle game events\n  useEffect(() => {\n    if (!socket) return;\n    socket.on('game_started', data => {\n      if (!data) return;\n      setGameState('betting');\n      setDealer(data.dealer || {\n        cards: [],\n        score: 0\n      });\n      setPlayers(data.players || []);\n      addMessage({\n        content: 'Game started! Place your bets.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('betting_ended', data => {\n      if (!data) return;\n      setPlayers(data.players || []);\n      setGameState('playing');\n      addMessage({\n        content: 'All bets placed. Game is starting...',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('player_bet_placed', data => {\n      if (!data) return;\n      if (data.players && Array.isArray(data.players)) {\n        setPlayers([...data.players]);\n      }\n      if (data.playerId === socket.id && data.balance !== undefined) {\n        const newBalance = data.balance;\n        setBalance(newBalance);\n        updateAuthBalance(newBalance);\n      }\n    });\n    socket.on('bet_placed', data => {\n      if (!data) return;\n      // Update balance when current player places bet\n      if (data.balance !== undefined) {\n        const newBalance = data.balance;\n        setBalance(newBalance);\n        updateAuthBalance(newBalance);\n      }\n    });\n    socket.on('player_turn', data => {\n      setCurrentTurn(data.playerId);\n      setPlayers(data.players || players);\n      const player = data.players && data.players.find(p => p.id === data.playerId);\n      addMessage({\n        content: `It's ${player ? player.username : 'unknown player'}'s turn`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n\n    // Track the last auto-skip message to prevent duplicates\n    let lastAutoSkipKey = null;\n    const handlePlayerAutoSkipped = data => {\n      var _data$players$find;\n      if (!data) return;\n\n      // Create a unique key for this auto-skip event\n      const skipKey = `${data.playerId}-${data.timestamp || Date.now()}`;\n\n      // Prevent duplicate messages\n      if (lastAutoSkipKey === skipKey) {\n        return;\n      }\n      lastAutoSkipKey = skipKey;\n      setPlayers(data.players || players);\n      setCurrentTurn(null);\n      const playerName = data.username || data.players && ((_data$players$find = data.players.find(p => p.id === data.playerId)) === null || _data$players$find === void 0 ? void 0 : _data$players$find.username) || 'A player';\n      addMessage({\n        content: `${playerName} was automatically skipped (30 seconds elapsed)`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    };\n    socket.on('player_auto_skipped', handlePlayerAutoSkipped);\n    socket.on('card_dealt', data => {\n      if (!data) return;\n      if (data.to === 'dealer') {\n        setDealer(data.dealer || {\n          cards: [],\n          score: 0\n        });\n      } else if (data.to && data.cards) {\n        setPlayers(prev => prev.map(player => player.id === data.to ? {\n          ...player,\n          cards: data.cards,\n          score: data.score || 0\n        } : player));\n      }\n    });\n    socket.on('turn_ended', data => {\n      if (!data) return;\n      setCurrentTurn(data.nextTurn);\n      setPlayers(data.players || []);\n    });\n    socket.on('dealer_turn', () => {\n      setCurrentTurn('dealer');\n      addMessage({\n        content: `Dealer's turn`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('game_reset', data => {\n      var _data$players;\n      if (!data) return;\n      setShowVotePrompt(false);\n      setVoteStatus(null);\n      setHasVoted(false);\n      setGameState('waiting');\n      setDealer({\n        cards: [],\n        score: 0\n      });\n      setCurrentTurn(null);\n      setPlayers(data.players || []);\n\n      // Clear game history when game is reset\n      setGameHistory([]);\n      const currentPlayer = (_data$players = data.players) === null || _data$players === void 0 ? void 0 : _data$players.find(p => p.id === socket.id);\n      if (currentPlayer) {\n        const newBalance = currentPlayer.balance;\n        setBalance(newBalance);\n        updateAuthBalance(newBalance);\n      }\n      addMessage({\n        content: data.message || 'Game has been reset! Everyone starts with $1000 again.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('game_ended', data => {\n      if (!data) return;\n\n      // Store the final game data for after animation\n      const finalData = data;\n\n      // Start the card pickup animation\n      setIsPickingUpCards(true);\n\n      // Wait for animation to complete before updating state\n      // Animation takes ~1.5 seconds (600ms per card + delays)\n      setTimeout(() => {\n        var _finalData$result, _players$;\n        setGameState('ended');\n        setDealer(finalData.dealer || {\n          cards: [],\n          score: 0\n        });\n        setPlayers(finalData.players || []);\n        setCurrentTurn(null);\n        setIsPickingUpCards(false);\n\n        // Update game history\n        const historyEntry = {\n          id: Date.now(),\n          dealer: finalData.dealer,\n          players: finalData.players,\n          results: ((_finalData$result = finalData.result) === null || _finalData$result === void 0 ? void 0 : _finalData$result.results) || [],\n          timestamp: Date.now(),\n          allPlayersLost: finalData.allPlayersLost || false\n        };\n        setGameHistory(prev => [historyEntry, ...prev].slice(0, 10));\n\n        // Add system message\n        let resultMessage = 'Round ended. Check your results!';\n        if (finalData.allPlayersLost) {\n          resultMessage = 'All players ran out of money!';\n        } else if (finalData.result && finalData.result.results) {\n          const resultSummary = finalData.result.results.map(r => `${r.username}: ${r.outcome} (${r.amountChange >= 0 ? '+' : ''}${r.amountChange})`).join(', ');\n          resultMessage = `Round ended. Results: ${resultSummary}`;\n        }\n        addMessage({\n          content: resultMessage,\n          type: 'system',\n          timestamp: Date.now()\n        });\n\n        // If all players lost, don't auto-start new round (wait for vote)\n        if (finalData.allPlayersLost) {\n          // Vote prompt will be shown via vote_to_continue event\n          return;\n        }\n\n        // If host has auto-next round enabled, automatically start a new round after animation\n        if (autoSkipNewRound && socket.id === ((_players$ = players[0]) === null || _players$ === void 0 ? void 0 : _players$.id)) {\n          setTimeout(() => {\n            startNewRound();\n          }, 500);\n        }\n      }, 2000); // Wait 2 seconds for all cards to animate\n    });\n    socket.on('vote_to_continue', data => {\n      if (!data) return;\n      setShowVotePrompt(true);\n      setHasVoted(false);\n      setVoteStatus(null);\n      addMessage({\n        content: data.message || 'All players ran out of money! Vote to continue and reset the game.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('vote_status', data => {\n      if (!data) return;\n      setVoteStatus(data);\n    });\n    socket.on('new_round', data => {\n      if (!data) return;\n      setGameState('betting');\n      if (data.players && Array.isArray(data.players)) {\n        setPlayers(data.players);\n      }\n      setDealer(data.dealer || {\n        cards: [],\n        score: 0\n      });\n      const manualStartMessage = data.isAutoSkip === false ? ' (Manual start by host)' : '';\n      addMessage({\n        content: `New round started${manualStartMessage}. Place your bets!`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    socket.on('message', data => {\n      addMessage(data);\n    });\n    socket.on('leaderboard_updated', data => {\n      setLeaderboard(data.leaderboard);\n    });\n    socket.on('player_split', data => {\n      var _data$players$find2;\n      if (!data) return;\n      setPlayers(data.players || []);\n      addMessage({\n        content: `${((_data$players$find2 = data.players.find(p => p.id === data.playerId)) === null || _data$players$find2 === void 0 ? void 0 : _data$players$find2.username) || 'Player'} split their hand`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n\n    // Handle player spectating event\n    socket.on('player_spectating', data => {\n      if (!data) return;\n\n      // Update the player's status in the players array\n      setPlayers(prev => prev.map(player => player.id === data.playerId ? {\n        ...player,\n        status: 'spectating'\n      } : player));\n      addMessage({\n        content: `${data.username} is now spectating the game`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    return () => {\n      socket.off('game_started');\n      socket.off('betting_ended');\n      socket.off('player_bet_placed');\n      socket.off('bet_placed');\n      socket.off('card_dealt');\n      socket.off('player_turn');\n      socket.off('turn_ended');\n      socket.off('dealer_turn');\n      socket.off('game_ended');\n      socket.off('game_reset');\n      socket.off('new_round');\n      socket.off('message');\n      socket.off('leaderboard_updated');\n      socket.off('player_split');\n      socket.off('player_spectating');\n      socket.off('player_auto_skipped');\n      socket.off('vote_to_continue');\n      socket.off('vote_status');\n    };\n  }, [socket, autoSkipNewRound, players, startNewRound]);\n\n  // Game actions\n  const createRoom = (usernameOverride = null, initialBalanceOverride = null) => {\n    if (!connected || !socket) {\n      setError('Not connected to server. Please wait a moment and try again.');\n      return;\n    }\n    if (!socket.connected) {\n      setError('Connection lost. Please refresh the page.');\n      return;\n    }\n    const finalUsername = usernameOverride || authUsername || username;\n    const finalBalance = initialBalanceOverride !== null ? initialBalanceOverride : authBalance || balance || 1000;\n    if (!finalUsername) {\n      setError('Username is required. Please sign in or continue as guest.');\n      return;\n    }\n    setUsername(finalUsername);\n    setBalance(finalBalance);\n    socket.emit('create_room', {\n      username: finalUsername,\n      balance: finalBalance\n    });\n  };\n  const joinRoom = (roomId, usernameOverride = null, initialBalanceOverride = null) => {\n    if (!connected) return;\n    const finalUsername = usernameOverride || authUsername || username;\n    const finalBalance = initialBalanceOverride !== null ? initialBalanceOverride : authBalance || balance || 1000;\n    if (!finalUsername) {\n      setError('Username is required. Please sign in or continue as guest.');\n      return;\n    }\n    setUsername(finalUsername);\n    setBalance(finalBalance);\n    socket.emit('join_room', {\n      roomId,\n      username: finalUsername,\n      balance: finalBalance\n    });\n  };\n  const startGame = () => {\n    if (!connected || !roomId) return;\n    socket.emit('start_game', {\n      roomId\n    });\n  };\n  const placeBet = amount => {\n    if (!connected || !roomId) return;\n    setPlayers(prevPlayers => prevPlayers.map(p => p.id === socket.id ? {\n      ...p,\n      bet: amount,\n      balance: p.balance - amount\n    } : p));\n    socket.emit('place_bet', {\n      roomId,\n      amount\n    });\n    setLastBet(amount);\n  };\n  const hit = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('hit', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('hit', {\n        roomId\n      });\n    }\n  };\n  const stand = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('stand', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('stand', {\n        roomId\n      });\n    }\n  };\n  const doubleDown = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('double_down', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('double_down', {\n        roomId\n      });\n    }\n  };\n  const split = () => {\n    if (!connected || !roomId || currentTurn !== socket.id) return;\n\n    // Can't split a split hand\n    if (currentTurn.includes('-split')) return;\n    socket.emit('split', {\n      roomId\n    });\n  };\n  const surrender = () => {\n    if (!connected || !roomId) return;\n\n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('surrender', {\n          roomId,\n          handId: currentTurn\n        });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('surrender', {\n        roomId\n      });\n    }\n  };\n  const sendMessage = message => {\n    if (!connected || !roomId) return;\n    socket.emit('send_message', {\n      roomId,\n      message,\n      sender: username\n    });\n  };\n  const leaveRoom = () => {\n    if (!connected || !roomId) return;\n    socket.emit('leave_room', {\n      roomId\n    });\n    setRoomId(null);\n    setPlayers([]);\n    setDealer({\n      cards: [],\n      score: 0\n    });\n    setGameState('waiting');\n    setCurrentTurn(null);\n    setMessages([]);\n  };\n  const kickPlayer = playerId => {\n    if (!connected || !roomId || !socket || !socket.connected) return;\n    socket.emit('kick_player', {\n      roomId,\n      playerId\n    });\n  };\n\n  // Restart game - reset all players' balances to 1000\n  const restartGame = () => {\n    if (!connected || !roomId || !socket || !socket.connected) {\n      alert('Error: Not connected or no room ID. Please refresh the page.');\n      return;\n    }\n    socket.emit('restart_game', {\n      roomId\n    });\n    socket.once('error', error => {\n      if (error !== null && error !== void 0 && error.message) {\n        alert(`Error: ${error.message}`);\n      }\n    });\n  };\n\n  // Check if it's current player's turn\n  const isPlayerTurn = () => {\n    if (!socket || !currentTurn) return false;\n\n    // Direct match with player's socket ID\n    if (currentTurn === socket.id) return true;\n\n    // Check if it's the player's split hand turn\n    // Split hands have IDs in the format: originalPlayerId-split\n    if (currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      return originalPlayerId === socket.id;\n    }\n    return false;\n  };\n\n  // Find the current player\n  const getCurrentPlayer = () => {\n    if (!socket || !players) return null;\n\n    // First check for the player's main hand\n    const player = players.find(p => p.id === socket.id);\n\n    // If it's the player's split hand turn, return that hand instead\n    if (currentTurn && currentTurn.includes('-split')) {\n      const splitHand = players.find(p => p.id === currentTurn);\n      if (splitHand && splitHand.originalPlayer === socket.id) {\n        return splitHand;\n      }\n    }\n    return player;\n  };\n\n  // Toggle hints\n  const toggleHints = () => {\n    setHintsEnabled(prev => !prev);\n  };\n  return /*#__PURE__*/_jsxDEV(GameContext.Provider, {\n    value: {\n      connected,\n      username,\n      balance,\n      roomId,\n      players,\n      dealer,\n      gameState,\n      currentTurn,\n      messages,\n      error,\n      gameHistory,\n      leaderboard,\n      lastBet,\n      hintsEnabled,\n      autoSkipNewRound,\n      createRoom,\n      joinRoom,\n      startGame,\n      placeBet,\n      hit,\n      stand,\n      doubleDown,\n      split,\n      surrender,\n      startNewRound,\n      sendMessage,\n      leaveRoom,\n      kickPlayer,\n      restartGame,\n      isPlayerTurn,\n      getCurrentPlayer,\n      toggleHints,\n      setAutoSkipNewRound,\n      socket,\n      isPickingUpCards,\n      showVotePrompt,\n      voteStatus,\n      hasVoted,\n      voteReset: vote => {\n        if (!socket || !roomId) return;\n        socket.emit('vote_reset', {\n          roomId,\n          vote\n        });\n        setHasVoted(true);\n      }\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 750,\n    columnNumber: 5\n  }, this);\n};\n_s2(GameProvider, \"1nbg6+IXu5H4Q9HQUZh5oZ+FN1s=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = GameProvider;\nvar _c;\n$RefreshReg$(_c, \"GameProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","io","useNavigate","useAuth","SOCKET_SERVER","jsxDEV","_jsxDEV","GameContext","useGame","_s","GameProvider","children","_s2","username","authUsername","balance","authBalance","setBalance","updateAuthBalance","socket","setSocket","connected","setConnected","setUsername","undefined","roomId","setRoomId","players","setPlayers","dealer","setDealer","cards","score","gameState","setGameState","currentTurn","setCurrentTurn","messages","setMessages","error","setError","gameHistory","setGameHistory","leaderboard","setLeaderboard","lastBet","setLastBet","hintsEnabled","setHintsEnabled","autoSkipNewRound","setAutoSkipNewRound","isPickingUpCards","setIsPickingUpCards","showVotePrompt","setShowVotePrompt","voteStatus","setVoteStatus","hasVoted","setHasVoted","navigate","addMessage","message","prevMessages","startNewRound","emit","newSocket","transports","reconnection","reconnectionDelay","reconnectionAttempts","timeout","forceNew","upgrade","rememberUpgrade","on","errorMsg","reason","data","setTimeout","disconnect","playerNames","map","p","join","content","type","timestamp","Date","now","newPlayer","length","leftPlayer","wasHost","kickedPlayer","off","handleKicked","Array","isArray","playerId","id","newBalance","player","find","lastAutoSkipKey","handlePlayerAutoSkipped","_data$players$find","skipKey","playerName","to","prev","nextTurn","_data$players","currentPlayer","finalData","_finalData$result","_players$","historyEntry","results","result","allPlayersLost","slice","resultMessage","resultSummary","r","outcome","amountChange","manualStartMessage","isAutoSkip","_data$players$find2","status","createRoom","usernameOverride","initialBalanceOverride","finalUsername","finalBalance","joinRoom","startGame","placeBet","amount","prevPlayers","bet","hit","includes","originalPlayerId","split","handId","stand","doubleDown","surrender","sendMessage","sender","leaveRoom","kickPlayer","restartGame","alert","once","isPlayerTurn","getCurrentPlayer","splitHand","originalPlayer","toggleHints","Provider","value","voteReset","vote","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Developer/Personal/Games/Multiplayer-Blackjack/client/src/contexts/GameContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport { io } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from './AuthContext';\nimport { SOCKET_SERVER } from '../config';\n\nexport const GameContext = createContext();\n\nexport const useGame = () => useContext(GameContext);\n\nexport const GameProvider = ({ children }) => {\n  const { username: authUsername, balance: authBalance, setBalance: updateAuthBalance } = useAuth();\n  const [socket, setSocket] = useState(null);\n  const [connected, setConnected] = useState(false);\n  const [username, setUsername] = useState(authUsername || '');\n  const [balance, setBalance] = useState(authBalance || 1000);\n\n  // Sync with auth context when it changes\n  useEffect(() => {\n    if (authUsername) {\n      setUsername(authUsername);\n    }\n    if (authBalance !== undefined) {\n      setBalance(authBalance);\n    }\n  }, [authUsername, authBalance]);\n  const [roomId, setRoomId] = useState(null);\n  const [players, setPlayers] = useState([]);\n  const [dealer, setDealer] = useState({ cards: [], score: 0 });\n  const [gameState, setGameState] = useState('waiting');\n  const [currentTurn, setCurrentTurn] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [error, setError] = useState(null);\n  const [gameHistory, setGameHistory] = useState([]);\n  const [leaderboard, setLeaderboard] = useState([]);\n  const [lastBet, setLastBet] = useState(0);\n  const [hintsEnabled, setHintsEnabled] = useState(true);\n  const [autoSkipNewRound, setAutoSkipNewRound] = useState(true);\n  const [isPickingUpCards, setIsPickingUpCards] = useState(false);\n  const [showVotePrompt, setShowVotePrompt] = useState(false);\n  const [voteStatus, setVoteStatus] = useState(null);\n  const [hasVoted, setHasVoted] = useState(false);\n  const navigate = useNavigate();\n\n  // Helper function to add messages to the chat\n  const addMessage = (message) => {\n    setMessages(prevMessages => [...prevMessages, message]);\n  };\n\n  // Define startNewRound function before it's used in useEffect\n  const startNewRound = useCallback(() => {\n    if (!connected || !roomId || !socket) return;\n    socket.emit('new_round', { roomId });\n  }, [connected, roomId, socket]);\n\n  // Connect to socket server\n  useEffect(() => {\n    const newSocket = io(SOCKET_SERVER, {\n      transports: ['polling', 'websocket'],\n      reconnection: true,\n      reconnectionDelay: 2000,\n      reconnectionAttempts: 10,\n      timeout: 30000,\n      forceNew: true,\n      upgrade: true,\n      rememberUpgrade: false\n    });\n    \n    setSocket(newSocket);\n    \n    newSocket.on('connect', () => {\n      setConnected(true);\n      setError(null);\n    });\n    \n    newSocket.on('connect_error', (error) => {\n      setConnected(false);\n      const errorMsg = error.message || 'Connection refused';\n      setError(`Failed to connect to server: ${errorMsg}. The server may be sleeping. Try visiting https://multiplayer-blackjack-7df9.onrender.com to wake it up, then refresh this page.`);\n    });\n    \n    newSocket.on('reconnect', () => {\n      setConnected(true);\n      setError(null);\n    });\n    \n    newSocket.on('reconnect_failed', () => {\n      setError('Unable to connect to server. Please check if the server is running and refresh the page.');\n    });\n    \n    newSocket.on('disconnect', (reason) => {\n      setConnected(false);\n      if (reason === 'io server disconnect') {\n        setError('Disconnected by server. Please refresh the page.');\n      }\n    });\n    \n    newSocket.on('error', (data) => {\n      setError(data.message || 'An error occurred');\n      setTimeout(() => setError(null), 5000);\n    });\n    \n    return () => {\n      newSocket.disconnect();\n    };\n  }, []);\n  \n  // Handle room events\n  useEffect(() => {\n    if (!socket) return;\n    \n    socket.on('room_joined', (data) => {\n      if (!data) return;\n      setRoomId(data.roomId);\n      setPlayers(data.players || []);\n      setGameState(data.gameState || 'waiting');\n      setError(null);\n      \n      // Add system message\n      const playerNames = data.players ? data.players.map(p => p.username).join(', ') : '';\n      addMessage({\n        content: `Room joined. Current players: ${playerNames}`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n\n      // Navigate to game room after successful join\n      navigate('/game-room');\n    });\n    \n    socket.on('player_joined', (data) => {\n      if (!data || !data.players) return;\n      setPlayers(data.players);\n      \n      // Add system message about new player\n      const newPlayer = data.players[data.players.length - 1];\n      if (newPlayer) {\n        addMessage({\n          content: `${newPlayer.username} joined the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    \n    socket.on('player_left', (data) => {\n      if (!data) return;\n      setPlayers(data.players || []);\n      \n      // Add system message about player leaving\n      if (data.leftPlayer) {\n        const message = data.wasHost \n          ? `${data.leftPlayer} (host) disconnected from the room`\n          : `${data.leftPlayer} disconnected from the room`;\n        addMessage({\n          content: message,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    \n    socket.on('room_update', (data) => {\n      if (!data) return;\n      if (data.players) setPlayers(data.players);\n      if (data.gameState) setGameState(data.gameState);\n      if (data.dealer) setDealer(data.dealer);\n    });\n    \n    socket.on('game_state_update', (data) => {\n      if (!data) return;\n      if (data.gameState) setGameState(data.gameState);\n      if (data.players) setPlayers(data.players);\n      if (data.dealer) setDealer(data.dealer);\n      \n      if (data.gameState === 'waiting') {\n        addMessage({\n          content: 'Game reset to waiting state - all players disconnected',\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    \n    socket.on('player_kicked', (data) => {\n      if (!data) return;\n      setPlayers(data.players || []);\n      \n      // Add system message about player being kicked\n      if (data.kickedPlayer) {\n        addMessage({\n          content: `${data.kickedPlayer} was kicked from the room`,\n          type: 'system',\n          timestamp: Date.now()\n        });\n      }\n    });\n    \n    return () => {\n      socket.off('room_joined');\n      socket.off('player_joined');\n      socket.off('player_left');\n      socket.off('player_kicked');\n      socket.off('room_update');\n      socket.off('game_state_update');\n    };\n  }, [socket, navigate]);\n  \n  // Handle being kicked from room\n  useEffect(() => {\n    if (!socket) return;\n    \n    const handleKicked = (data) => {\n      // Current player was kicked\n      setError(data.message || 'You have been kicked from the room');\n      // Clear room state\n      setRoomId(null);\n      setPlayers([]);\n      setDealer({ cards: [], score: 0 });\n      setGameState('waiting');\n      setCurrentTurn(null);\n      setMessages([]);\n      // Navigate to home\n      navigate('/');\n    };\n    \n    socket.on('kicked', handleKicked);\n    \n    return () => {\n      socket.off('kicked', handleKicked);\n    };\n  }, [socket, navigate]);\n  \n  // Handle game events\n  useEffect(() => {\n    if (!socket) return;\n    \n    socket.on('game_started', (data) => {\n      if (!data) return;\n      setGameState('betting');\n      setDealer(data.dealer || { cards: [], score: 0 });\n      setPlayers(data.players || []);\n      \n      addMessage({\n        content: 'Game started! Place your bets.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    socket.on('betting_ended', (data) => {\n      if (!data) return;\n      setPlayers(data.players || []);\n      setGameState('playing');\n      \n      addMessage({\n        content: 'All bets placed. Game is starting...',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    socket.on('player_bet_placed', (data) => {\n      if (!data) return;\n      \n      if (data.players && Array.isArray(data.players)) {\n        setPlayers([...data.players]);\n      }\n      \n      if (data.playerId === socket.id && data.balance !== undefined) {\n        const newBalance = data.balance;\n        setBalance(newBalance);\n        updateAuthBalance(newBalance);\n      }\n    });\n    \n    socket.on('bet_placed', (data) => {\n      if (!data) return;\n      // Update balance when current player places bet\n      if (data.balance !== undefined) {\n        const newBalance = data.balance;\n        setBalance(newBalance);\n        updateAuthBalance(newBalance);\n      }\n    });\n    \n    socket.on('player_turn', (data) => {\n      setCurrentTurn(data.playerId);\n      setPlayers(data.players || players);\n      \n      const player = data.players && data.players.find(p => p.id === data.playerId);\n      \n      addMessage({\n        content: `It's ${player ? player.username : 'unknown player'}'s turn`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    // Track the last auto-skip message to prevent duplicates\n    let lastAutoSkipKey = null;\n    \n    const handlePlayerAutoSkipped = (data) => {\n      if (!data) return;\n      \n      // Create a unique key for this auto-skip event\n      const skipKey = `${data.playerId}-${data.timestamp || Date.now()}`;\n      \n      // Prevent duplicate messages\n      if (lastAutoSkipKey === skipKey) {\n        return;\n      }\n      \n      lastAutoSkipKey = skipKey;\n      \n      setPlayers(data.players || players);\n      setCurrentTurn(null);\n      \n      const playerName = data.username || (data.players && data.players.find(p => p.id === data.playerId)?.username) || 'A player';\n      \n      addMessage({\n        content: `${playerName} was automatically skipped (30 seconds elapsed)`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    };\n    \n    socket.on('player_auto_skipped', handlePlayerAutoSkipped);\n    \n    socket.on('card_dealt', (data) => {\n      if (!data) return;\n      if (data.to === 'dealer') {\n        setDealer(data.dealer || { cards: [], score: 0 });\n      } else if (data.to && data.cards) {\n        setPlayers(prev => \n          prev.map(player => \n            player.id === data.to ? { ...player, cards: data.cards, score: data.score || 0 } : player\n          )\n        );\n      }\n    });\n    \n    socket.on('turn_ended', (data) => {\n      if (!data) return;\n      setCurrentTurn(data.nextTurn);\n      setPlayers(data.players || []);\n    });\n    \n    socket.on('dealer_turn', () => {\n      setCurrentTurn('dealer');\n      \n      addMessage({\n        content: `Dealer's turn`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    socket.on('game_reset', (data) => {\n      if (!data) return;\n      \n      setShowVotePrompt(false);\n      setVoteStatus(null);\n      setHasVoted(false);\n      setGameState('waiting');\n      setDealer({ cards: [], score: 0 });\n      setCurrentTurn(null);\n      setPlayers(data.players || []);\n      \n      // Clear game history when game is reset\n      setGameHistory([]);\n      \n      const currentPlayer = data.players?.find(p => p.id === socket.id);\n      if (currentPlayer) {\n        const newBalance = currentPlayer.balance;\n        setBalance(newBalance);\n        updateAuthBalance(newBalance);\n      }\n      \n      addMessage({\n        content: data.message || 'Game has been reset! Everyone starts with $1000 again.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    socket.on('game_ended', (data) => {\n      if (!data) return;\n      \n      // Store the final game data for after animation\n      const finalData = data;\n      \n      // Start the card pickup animation\n      setIsPickingUpCards(true);\n      \n      // Wait for animation to complete before updating state\n      // Animation takes ~1.5 seconds (600ms per card + delays)\n      setTimeout(() => {\n        setGameState('ended');\n        setDealer(finalData.dealer || { cards: [], score: 0 });\n        setPlayers(finalData.players || []);\n        setCurrentTurn(null);\n        setIsPickingUpCards(false);\n        \n        // Update game history\n        const historyEntry = {\n          id: Date.now(),\n          dealer: finalData.dealer,\n          players: finalData.players,\n          results: finalData.result?.results || [],\n          timestamp: Date.now(),\n          allPlayersLost: finalData.allPlayersLost || false\n        };\n        setGameHistory(prev => [historyEntry, ...prev].slice(0, 10));\n        \n        // Add system message\n        let resultMessage = 'Round ended. Check your results!';\n        if (finalData.allPlayersLost) {\n          resultMessage = 'All players ran out of money!';\n        } else if (finalData.result && finalData.result.results) {\n          const resultSummary = finalData.result.results\n            .map(r => `${r.username}: ${r.outcome} (${r.amountChange >= 0 ? '+' : ''}${r.amountChange})`)\n            .join(', ');\n          resultMessage = `Round ended. Results: ${resultSummary}`;\n        }\n        \n        addMessage({\n          content: resultMessage,\n          type: 'system',\n          timestamp: Date.now()\n        });\n        \n        // If all players lost, don't auto-start new round (wait for vote)\n        if (finalData.allPlayersLost) {\n          // Vote prompt will be shown via vote_to_continue event\n          return;\n        }\n        \n        // If host has auto-next round enabled, automatically start a new round after animation\n        if (autoSkipNewRound && socket.id === players[0]?.id) {\n          setTimeout(() => {\n            startNewRound();\n          }, 500);\n        }\n      }, 2000); // Wait 2 seconds for all cards to animate\n    });\n    \n    socket.on('vote_to_continue', (data) => {\n      if (!data) return;\n      setShowVotePrompt(true);\n      setHasVoted(false);\n      setVoteStatus(null);\n      addMessage({\n        content: data.message || 'All players ran out of money! Vote to continue and reset the game.',\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    socket.on('vote_status', (data) => {\n      if (!data) return;\n      setVoteStatus(data);\n    });\n    \n    socket.on('new_round', (data) => {\n      if (!data) return;\n      \n      setGameState('betting');\n      if (data.players && Array.isArray(data.players)) {\n        setPlayers(data.players);\n      }\n      setDealer(data.dealer || { cards: [], score: 0 });\n      \n      const manualStartMessage = data.isAutoSkip === false ? ' (Manual start by host)' : '';\n      addMessage({\n        content: `New round started${manualStartMessage}. Place your bets!`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    socket.on('message', (data) => {\n      addMessage(data);\n    });\n    \n    socket.on('leaderboard_updated', (data) => {\n      setLeaderboard(data.leaderboard);\n    });\n    \n    socket.on('player_split', (data) => {\n      if (!data) return;\n      setPlayers(data.players || []);\n      \n      addMessage({\n        content: `${data.players.find(p => p.id === data.playerId)?.username || 'Player'} split their hand`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    // Handle player spectating event\n    socket.on('player_spectating', (data) => {\n      if (!data) return;\n      \n      // Update the player's status in the players array\n      setPlayers(prev => \n        prev.map(player => \n          player.id === data.playerId \n            ? { ...player, status: 'spectating' } \n            : player\n        )\n      );\n      \n      addMessage({\n        content: `${data.username} is now spectating the game`,\n        type: 'system',\n        timestamp: Date.now()\n      });\n    });\n    \n    return () => {\n      socket.off('game_started');\n      socket.off('betting_ended');\n      socket.off('player_bet_placed');\n      socket.off('bet_placed');\n      socket.off('card_dealt');\n      socket.off('player_turn');\n      socket.off('turn_ended');\n      socket.off('dealer_turn');\n      socket.off('game_ended');\n      socket.off('game_reset');\n      socket.off('new_round');\n      socket.off('message');\n      socket.off('leaderboard_updated');\n      socket.off('player_split');\n      socket.off('player_spectating');\n      socket.off('player_auto_skipped');\n      socket.off('vote_to_continue');\n      socket.off('vote_status');\n    };\n  }, [socket, autoSkipNewRound, players, startNewRound]);\n  \n  // Game actions\n  const createRoom = (usernameOverride = null, initialBalanceOverride = null) => {\n    if (!connected || !socket) {\n      setError('Not connected to server. Please wait a moment and try again.');\n      return;\n    }\n    \n    if (!socket.connected) {\n      setError('Connection lost. Please refresh the page.');\n      return;\n    }\n    \n    const finalUsername = usernameOverride || authUsername || username;\n    const finalBalance = initialBalanceOverride !== null ? initialBalanceOverride : (authBalance || balance || 1000);\n    \n    if (!finalUsername) {\n      setError('Username is required. Please sign in or continue as guest.');\n      return;\n    }\n    \n    setUsername(finalUsername);\n    setBalance(finalBalance);\n    socket.emit('create_room', { username: finalUsername, balance: finalBalance });\n  };\n  \n  const joinRoom = (roomId, usernameOverride = null, initialBalanceOverride = null) => {\n    if (!connected) return;\n    \n    const finalUsername = usernameOverride || authUsername || username;\n    const finalBalance = initialBalanceOverride !== null ? initialBalanceOverride : (authBalance || balance || 1000);\n    \n    if (!finalUsername) {\n      setError('Username is required. Please sign in or continue as guest.');\n      return;\n    }\n    \n    setUsername(finalUsername);\n    setBalance(finalBalance);\n    socket.emit('join_room', { roomId, username: finalUsername, balance: finalBalance });\n  };\n  \n  const startGame = () => {\n    if (!connected || !roomId) return;\n    \n    socket.emit('start_game', { roomId });\n  };\n  \n  const placeBet = (amount) => {\n    if (!connected || !roomId) return;\n    \n    setPlayers(prevPlayers => \n      prevPlayers.map(p => \n        p.id === socket.id \n          ? { ...p, bet: amount, balance: p.balance - amount }\n          : p\n      )\n    );\n    \n    socket.emit('place_bet', { roomId, amount });\n    setLastBet(amount);\n  };\n  \n  const hit = () => {\n    if (!connected || !roomId) return;\n    \n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('hit', { roomId, handId: currentTurn });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('hit', { roomId });\n    }\n  };\n  \n  const stand = () => {\n    if (!connected || !roomId) return;\n    \n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('stand', { roomId, handId: currentTurn });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('stand', { roomId });\n    }\n  };\n  \n  const doubleDown = () => {\n    if (!connected || !roomId) return;\n    \n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('double_down', { roomId, handId: currentTurn });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('double_down', { roomId });\n    }\n  };\n  \n  const split = () => {\n    if (!connected || !roomId || currentTurn !== socket.id) return;\n    \n    // Can't split a split hand\n    if (currentTurn.includes('-split')) return;\n    \n    socket.emit('split', { roomId });\n  };\n  \n  const surrender = () => {\n    if (!connected || !roomId) return;\n    \n    // For split hands, we need to use the original player's socket ID\n    if (currentTurn && currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      if (originalPlayerId === socket.id) {\n        socket.emit('surrender', { roomId, handId: currentTurn });\n      }\n    } else if (currentTurn === socket.id) {\n      socket.emit('surrender', { roomId });\n    }\n  };\n  \n  const sendMessage = (message) => {\n    if (!connected || !roomId) return;\n    \n    socket.emit('send_message', { roomId, message, sender: username });\n  };\n  \n  const leaveRoom = () => {\n    if (!connected || !roomId) return;\n    \n    socket.emit('leave_room', { roomId });\n    setRoomId(null);\n    setPlayers([]);\n    setDealer({ cards: [], score: 0 });\n    setGameState('waiting');\n    setCurrentTurn(null);\n    setMessages([]);\n  };\n  \n  const kickPlayer = (playerId) => {\n    if (!connected || !roomId || !socket || !socket.connected) return;\n    socket.emit('kick_player', { roomId, playerId });\n  };\n\n  // Restart game - reset all players' balances to 1000\n  const restartGame = () => {\n    if (!connected || !roomId || !socket || !socket.connected) {\n      alert('Error: Not connected or no room ID. Please refresh the page.');\n      return;\n    }\n    \n    socket.emit('restart_game', { roomId });\n    \n    socket.once('error', (error) => {\n      if (error?.message) {\n        alert(`Error: ${error.message}`);\n      }\n    });\n  };\n  \n  // Check if it's current player's turn\n  const isPlayerTurn = () => {\n    if (!socket || !currentTurn) return false;\n    \n    // Direct match with player's socket ID\n    if (currentTurn === socket.id) return true;\n    \n    // Check if it's the player's split hand turn\n    // Split hands have IDs in the format: originalPlayerId-split\n    if (currentTurn.includes('-split')) {\n      const originalPlayerId = currentTurn.split('-')[0];\n      return originalPlayerId === socket.id;\n    }\n    \n    return false;\n  };\n  \n  // Find the current player\n  const getCurrentPlayer = () => {\n    if (!socket || !players) return null;\n    \n    // First check for the player's main hand\n    const player = players.find(p => p.id === socket.id);\n    \n    // If it's the player's split hand turn, return that hand instead\n    if (currentTurn && currentTurn.includes('-split')) {\n      const splitHand = players.find(p => p.id === currentTurn);\n      if (splitHand && splitHand.originalPlayer === socket.id) {\n        return splitHand;\n      }\n    }\n    \n    return player;\n  };\n  \n  // Toggle hints\n  const toggleHints = () => {\n    setHintsEnabled(prev => !prev);\n  };\n\n  return (\n    <GameContext.Provider\n      value={{\n        connected,\n        username,\n        balance,\n        roomId,\n        players,\n        dealer,\n        gameState,\n        currentTurn,\n        messages,\n        error,\n        gameHistory,\n        leaderboard,\n        lastBet,\n        hintsEnabled,\n        autoSkipNewRound,\n        createRoom,\n        joinRoom,\n        startGame,\n        placeBet,\n        hit,\n        stand,\n        doubleDown,\n        split,\n        surrender,\n        startNewRound,\n        sendMessage,\n        leaveRoom,\n        kickPlayer,\n        restartGame,\n        isPlayerTurn,\n        getCurrentPlayer,\n        toggleHints,\n        setAutoSkipNewRound,\n        socket,\n        isPickingUpCards,\n        showVotePrompt,\n        voteStatus,\n        hasVoted,\n        voteReset: (vote) => {\n          if (!socket || !roomId) return;\n          socket.emit('vote_reset', { roomId, vote });\n          setHasVoted(true);\n        }\n      }}\n    >\n      {children}\n    </GameContext.Provider>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}